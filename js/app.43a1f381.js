(function(e){function t(t){for(var r,o,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,s=1;s<a.length;s++){var l=a[s];0!==n[l]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},n={app:0},i=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/phaser-app/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"041f":function(e,t,a){},"0d3f":function(e,t,a){"use strict";a("e839")},1851:function(e,t,a){},"1abf":function(e,t,a){"use strict";a("6249")},2099:function(e,t,a){},"25ad":function(e,t,a){"use strict";a("bd50")},"2f8f":function(e,t,a){},"35ae":function(e,t,a){"use strict";a("7f19")},4713:function(e,t,a){},"4e6e":function(e,t,a){},"51a0":function(e,t,a){"use strict";a("1851")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=a("ed09"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{staticClass:"border p-0 bg-light",attrs:{fluid:"",id:"container"}},[a("b-row",{attrs:{"no-gutters":"",id:"header"}},[a("b-col",[a("MenuBar")],1)],1),a("vue-splitter",{attrs:{margin:10,defaultPercent:50}},[a("div",{attrs:{slot:"left-pane"},slot:"left-pane"},[a("MatrixDiagramCY")],1),a("div",{attrs:{slot:"right-pane"},slot:"right-pane"},[a("ItemEditors",{attrs:{selectedID:e.store.getters.selectedID}})],1)])],1)},o=[],s=(a("99af"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-navbar",{staticClass:"border-bottom",attrs:{toggleable:"sm",id:"nav"}},[a("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),a("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[a("b-navbar-nav",[a("b-nav-item-dropdown",{attrs:{text:"File"}},[a("b-dropdown-item-button",{on:{click:e.clearAll}},[a("b-icon-file-earmark-plus",{staticClass:"mr-2"}),a("span",[e._v("New")])],1),a("b-dropdown-item-button",{on:{click:e.openFileDialog}},[a("b-icon-upload",{staticClass:"mr-2"}),a("span",[e._v("Open (JSON)...")]),a("b-form-file",{staticStyle:{display:"none"},attrs:{plain:"",id:"fileOpen",accept:".json"},on:{input:e.loadJSON}})],1),a("b-dropdown-item-button",{on:{click:e.saveJSON}},[a("b-icon-download",{staticClass:"mr-2"}),a("span",[e._v("Save (JSON)...")])],1),a("b-dropdown-divider"),a("b-dropdown-item-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modalPeriodsImport",modifiers:{modalPeriodsImport:!0}}]},[a("b-icon-box-arrow-in-left",{staticClass:"mr-2"}),a("NodeIcon",{attrs:{nodeClass:e.NodeClass.PERIOD}}),a("span",[e._v("Import Perio.do collection...")]),a("PeriodsImport")],1),a("b-dropdown-divider"),a("b-nav-item",{staticClass:"ml-3 menu"},[a("b-icon-box-arrow-in-left",{staticClass:"mr-2"}),a("span",[e._v("Import CSV")]),a("b-icon-caret-right-fill"),a("ul",{staticClass:"dropdown-menu dropdown-submenu"},[a("li",[a("b-dropdown-item-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modalCsvImport",modifiers:{modalCsvImport:!0}}],on:{click:function(t){return e.setupModal("phases")}}},[a("NodeIcon",{staticClass:"mr-2",attrs:{nodeClass:e.NodeClass.PHASE}}),a("span",[e._v("Import phase records...")])],1)],1),a("li",[a("b-dropdown-item-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modalCsvImport",modifiers:{modalCsvImport:!0}}],on:{click:function(t){return e.setupModal("groups")}}},[a("NodeIcon",{staticClass:"mr-2",attrs:{nodeClass:e.NodeClass.GROUP}}),a("span",[e._v("Import group records...")])],1)],1),a("li",[a("b-dropdown-item-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modalCsvImport",modifiers:{modalCsvImport:!0}}],on:{click:function(t){return e.setupModal("subgroups")}}},[a("NodeIcon",{staticClass:"mr-2",attrs:{nodeClass:e.NodeClass.SUBGROUP}}),a("span",[e._v("Import subgroup records...")])],1)],1),a("li",[a("b-dropdown-item-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modalCsvImport",modifiers:{modalCsvImport:!0}}],on:{click:function(t){return e.setupModal("contexts")}}},[a("NodeIcon",{staticClass:"mr-2",attrs:{nodeClass:e.NodeClass.CONTEXT}}),a("span",[e._v("Import context records...")])],1)],1),a("li",[a("b-dropdown-item-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modalCsvImport",modifiers:{modalCsvImport:!0}}],on:{click:function(t){return e.setupModal("stratigraphy")}}},[a("NodeIcon",{staticClass:"mr-2",attrs:{nodeClass:e.NodeClass.CONTEXT}}),a("span",[e._v("Import context stratigraphy...")])],1)],1),a("li",[a("b-dropdown-item-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modalCsvImport",modifiers:{modalCsvImport:!0}}],on:{click:function(t){return e.setupModal("stratigraphyold")}}},[a("NodeIcon",{staticClass:"mr-2",attrs:{nodeClass:e.NodeClass.CONTEXT}}),a("span",[e._v("Import context stratigraphy (old)...")])],1)],1),a("li",[a("b-dropdown-item-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modalCsvImport",modifiers:{modalCsvImport:!0}}],on:{click:function(t){return e.setupModal("datings")}}},[a("NodeIcon",{staticClass:"mr-2",attrs:{nodeClass:e.NodeClass.DATING}}),a("span",[e._v("Import dating records...")])],1)],1),a("li",[a("b-dropdown-item-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modalCsvImport",modifiers:{modalCsvImport:!0}}],on:{click:function(t){return e.setupModal("periods")}}},[a("NodeIcon",{staticClass:"mr-2",attrs:{nodeClass:e.NodeClass.PERIOD}}),a("span",[e._v("Import period records...")])],1)],1)]),a("CsvImport",{attrs:{mode:e.csvImportMode}})],1),a("b-nav-item",{staticClass:"ml-3 menu"},[a("b-icon-box-arrow-right",{staticClass:"mr-2"}),a("span",[e._v("Export CSV")]),a("b-icon-caret-right-fill"),a("ul",{staticClass:"dropdown-menu dropdown-submenu"},[a("li",[a("b-dropdown-item-button",{on:{click:function(t){return e.saveDelimited(e.NodeClass.PHASE)}}},[a("NodeIcon",{staticClass:"mr-2",attrs:{nodeClass:e.NodeClass.PHASE}}),a("span",[e._v("Export phase records...")])],1)],1),a("li",[a("b-dropdown-item-button",{on:{click:function(t){return e.saveDelimited(e.NodeClass.GROUP)}}},[a("NodeIcon",{staticClass:"mr-2",attrs:{nodeClass:e.NodeClass.GROUP}}),a("span",[e._v("Export group records...")])],1)],1),a("li",[a("b-dropdown-item-button",{on:{click:function(t){return e.saveDelimited(e.NodeClass.SUBGROUP)}}},[a("NodeIcon",{staticClass:"mr-2",attrs:{nodeClass:e.NodeClass.SUBGROUP}}),a("span",[e._v("Export subgroup records...")])],1)],1),a("li",[a("b-dropdown-item-button",{on:{click:function(t){return e.saveDelimited(e.NodeClass.CONTEXT)}}},[a("NodeIcon",{staticClass:"mr-2",attrs:{nodeClass:e.NodeClass.CONTEXT}}),a("span",[e._v("Export context records...")])],1)],1),a("li",[a("b-dropdown-item-button",{on:{click:function(t){return e.saveDelimited("edge")}}},[a("NodeIcon",{staticClass:"mr-2",attrs:{nodeClass:e.NodeClass.CONTEXT}}),a("span",[e._v("Export context stratigraphy...")])],1)],1),a("li",[a("b-dropdown-item-button",{on:{click:function(t){return e.saveDelimited(e.NodeClass.DATING)}}},[a("NodeIcon",{staticClass:"mr-2",attrs:{nodeClass:e.NodeClass.DATING}}),a("span",[e._v("Export dating records...")])],1)],1),a("li",[a("b-dropdown-item-button",{on:{click:function(t){return e.saveDelimited(e.NodeClass.PERIOD)}}},[a("NodeIcon",{staticClass:"mr-2",attrs:{nodeClass:e.NodeClass.PERIOD}}),a("span",[e._v("Export period records...")])],1)],1)])],1),a("b-dropdown-divider"),a("b-dropdown-item-button",{on:{click:e.exportPartPNG}},[a("b-icon-box-arrow-right",{staticClass:"mr-2"}),a("span",[e._v("Export visible diagram (PNG)...")])],1),a("b-dropdown-item-button",{on:{click:e.exportFullPNG}},[a("b-icon-box-arrow-right",{staticClass:"mr-2"}),a("span",[e._v("Export full diagram (PNG)...")])],1)],1),a("b-nav-item-dropdown",{attrs:{text:"View"}},[a("b-dropdown-item-button",{on:{click:e.diagramZoomIn}},[a("b-icon-zoom-in",{staticClass:"mr-2"}),a("span",[e._v("Zoom in")])],1),a("b-dropdown-item-button",{on:{click:e.diagramZoomOut}},[a("b-icon-zoom-out",{staticClass:"mr-2"}),a("span",[e._v("Zoom out")])],1),a("b-dropdown-item-button",{on:{click:e.diagramZoomFit}},[a("b-icon-arrows-fullscreen",{staticClass:"mr-2"}),a("span",[e._v("Zoom to fit")])],1),a("b-dropdown-divider"),a("b-dropdown-item-button",{on:{click:e.diagramRefresh}},[a("b-icon-arrow-clockwise",{staticClass:"mr-2 p-1 rounded bg-primary",attrs:{variant:"light"}}),a("span",[e._v("Refresh diagram")])],1),a("b-dropdown-item-button",{on:{click:e.toggleLock}},[e.locked?a("span",[a("b-icon-lock-fill",{staticClass:"mr-2 p-1 rounded bg-success",attrs:{variant:"light"}}),a("span",[e._v("Unlock diagram")])],1):a("span",[a("b-icon-unlock-fill",{staticClass:"mr-2 p-1 rounded bg-danger",attrs:{variant:"light"}}),a("span",[e._v("Lock diagram")])],1)]),a("b-dropdown-item-button",{attrs:{disabled:e.locked},on:{click:function(t){return e.diagramRedoLayout("dagre")}}},[a("b-icon-diagram-3",{staticClass:"mr-2"}),a("span",[e._v("Redo Layout")])],1)],1),a("b-nav-item-dropdown",{attrs:{text:"Help"}},[a("b-nav-item",{staticClass:"mx-2",attrs:{active:!0,target:"_blank",rel:"noopener noreferrer",href:"help.html"}},[a("b-icon-question-circle",{staticClass:"mr-2"}),a("span",[e._v("Show help...")])],1)],1)],1)],1),a("b-navbar-brand",{directives:[{name:"b-modal",rawName:"v-b-modal.modalAbout",modifiers:{modalAbout:!0}}],attrs:{href:"#"}},[a("img",{attrs:{src:"phaser-spacedout-logo.png",width:"94",height:"25",alt:"PHASER"}}),a("span",{staticClass:"ml-2 small"},[e._v("v"+e._s(e.store.getters.appVersion))]),a("HelpAbout")],1)],1)}),l=[],c=a("ade3"),u=(a("e9c4"),a("d81d"),a("a4d3"),a("e01a"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{attrs:{centered:"",id:"modalCsvImport",title:"Import delimited "+e.mode,"content-class":"shadow"},on:{ok:e.handleOK,cancel:e.handleClose,close:e.handleClose},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var r=t.ok,n=t.cancel;return[a("b-button",{staticClass:"float-right",attrs:{pill:"",variant:"primary",size:"md"},on:{click:function(e){return r()}}},[a("TickOrCross",{staticClass:"mr-1",attrs:{value:!0}}),a("span",[e._v("OK")])],1),a("b-button",{staticClass:"float-right mr-1",attrs:{pill:"",variant:"secondary",size:"md"},on:{click:function(e){return n()}}},[a("TickOrCross",{staticClass:"mr-1",attrs:{value:!1}}),a("span",[e._v("Cancel")])],1)]}}])},[a("div",[e._v("Expected fields:")]),a("div",[e._v(e._s(e.expectedFields.join(", ")))]),a("b-form-file",{staticClass:"my-1",attrs:{size:"sm",placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here...",accept:"text/csv, .csv, .tab, .txt, .tsv",state:Boolean(e.selectedFile)},on:{input:function(t){return e.loadFile(e.selectedFile)}},model:{value:e.selectedFile,callback:function(t){e.selectedFile=t},expression:"selectedFile"}}),a("b-input-group",{staticClass:"py-2",attrs:{prepend:"Delimiter",size:"sm"}},[a("b-form-radio-group",{staticClass:"p-2 border",attrs:{size:"sm",options:e.delimiterOptions,name:"delimiter"},model:{value:e.delimiter,callback:function(t){e.delimiter=t},expression:"delimiter"}})],1),a("b-form-checkbox",{staticClass:"mx-2",attrs:{inline:"",size:"sm",id:"checkbox-header",name:"checkbox-header",value:!0,"unchecked-value":!1},model:{value:e.hasHeader,callback:function(t){e.hasHeader=t},expression:"hasHeader"}},[a("span",[e._v("Has header row?")])]),a("div",{staticClass:"m-2"},[e._v("Preview:")]),a("div",{staticClass:"overflow-auto",staticStyle:{height:"300px"}},[a("b-table",{attrs:{small:"",striped:"",stacked:"",items:e.parserPreview.data,fields:e.fields}})],1)],1)}),d=[],p=a("2909"),f=a("b85c"),b=a("1da1"),m=(a("96cf"),a("a9e3"),a("4ec9"),a("159b"),a("369b")),g=a.n(m),h=(a("dca8"),a("ac1f"),a("5319"),a("5b81"),a("fb6a"),a("a15b"),a("a630"),a("4d90"),a("25f0"),a("466d"),a("498a"),a("8ba4"),Object.freeze({BEFORE:"before",AFTER:"after",MEETS:"meets",METBY:"metby",OVERLAPS:"overlaps",OVERLAPPEDBY:"overlappedby",STARTS:"starts",STARTEDBY:"startedby",FINISHES:"finishes",FINISHEDBY:"finishedby",WITHIN:"within",CONTAINS:"contains",EQUALS:"equals"})),v=Object.freeze({ABOVE:"above",BELOW:"below",EQUAL:"equal"}),y=Object.freeze({PHASE:"phase",GROUP:"group",SUBGROUP:"subgroup",CONTEXT:"context",DATING:"dating",PERIOD:"period"}),O=Object.freeze({EDGE:"edge"}),x=Object.freeze({NODE_BG:"white",NODE_FG:"black",PHASE_BG:"white",PHASE_FG:"red",GROUP_BG:"honeydew",GROUP_FG:"green",SUBGROUP_BG:"aliceblue",SUBGROUP_FG:"blue",CONTEXT_BG:"ghostwhite",CONTEXT_FG:"black",DATING_BG:"lightpink",DATING_FG:"deeppink",PERIOD_BG:"orchid",PERIOD_FG:"rebeccapurple",SELECTED_BG:"gold",SELECTED_FG:"black",EDGE:"gray",EDGE_CONNECTED:"darkred",EDGE_SELECTED:"darkred"}),C=function(){return(new Date).toISOString()},D=function(){return C().replaceAll(/[:.\-Z]/g,"")},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e?e.length>t?t<=3?e.slice(0,t-3)+"...":e.slice(0,t)+"...":e:""},I=function(e){return Array.from(e).map((function(e){return e.charCodeAt(0)<128?e.charCodeAt(0).toString(16).padStart(2,"0"):encodeURIComponent(e).replace(/%/g,"").toLowerCase()})).join("")},k=function(e,t){var a=E(e),r=t;return a.length>0&&!isNaN(a)&&(r=parseInt(a)),r},E=function(e){return(e||"").toString().trim()},j=function(e){return E(e).toLowerCase()},S=function(e,t){var a;return j(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.class)==j(t)},_=function(e){return S(e,y.GROUP)},N=function(e){return S(e,y.CONTEXT)},T=function(e){return S(e,y.DATING)},Y=function(e){return S(e,y.PERIOD)},P=function(e){return!!e&&(!!Number.isInteger(e.minYear)&&(!!Number.isInteger(e.maxYear)&&e.minYear<=e.maxYear))},R=function(e,t){return!(!P(e)||!P(t))&&e.maxYear<t.minYear},B=function(e,t){return R(t,e)},G=function(e,t){return!(!P(e)||!P(t))&&e.maxYear==t.minYear},L=function(e,t){return G(t,e)},U=function(e,t){return!(!P(e)||!P(t))&&(e.minYear<t.minYear&&e.maxYear>t.minYear&&e.maxYear<t.maxYear)},A=function(e,t){return U(t,e)},F=function(e,t){return!(!P(e)||!P(t))&&(e.minYear==t.minYear&&e.maxYear<t.maxYear)},z=function(e,t){return F(t,e)},M=function(e,t){return!(!P(e)||!P(t))&&(e.minYear>t.minYear&&e.maxYear<t.maxYear)},V=function(e,t){return M(t,e)},H=function(e,t){return!(!P(e)||!P(t))&&(e.maxYear==t.maxYear&&e.minYear>t.minYear)},$=function(e,t){return H(t,e)},q=function(e,t){return!(!P(e)||!P(t))&&(e.minYear==t.minYear&&e.maxYear==t.maxYear)},X=function(e,t){var a="";return R(e,t)?a=h.BEFORE:B(e,t)?a=h.AFTER:G(e,t)?a=h.MEETS:L(e,t)?a=h.METBY:U(e,t)?a=h.OVERLAPS:A(e,t)?a=h.OVERLAPPEDBY:F(e,t)?a=h.STARTS:z(e,t)?a=h.STARTEDBY:H(e,t)?a=h.FINISHES:$(e,t)?a=h.FINISHEDBY:M(e,t)?a=h.WITHIN:V(e,t)?a=h.CONTAINS:q(e,t)&&(a=h.EQUALS),a},W=function(e,t,a,r){var n={VALID:"status-valid",UNCERTAIN:"status-uncertain",NEEDSMORE:"status-needsmore",INVALID:"status-invalid",UNKNOWN:"status-unknown"},i=e===t?n.UNCERTAIN:n.NEEDSMORE,o=n.UNKNOWN;if(""!==r)switch(a){case v.ABOVE:switch(r){case h.BEFORE:o=n.INVALID;break;case h.AFTER:o=n.VALID;break;default:o=i;break}break;case v.BELOW:switch(r){case h.BEFORE:o=n.VALID;break;case h.AFTER:o=n.INVALID;break;default:o=i;break}break;case v.EQUAL:switch(r){case h.BEFORE:o=n.INVALID;break;case h.AFTER:o=n.INVALID;break;case h.EQUALS:o=n.VALID;break;default:o=i;break}break}return o},K=a("4245"),J=a.n(K),Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return!0===e.value?a("span",{staticClass:"text-success"},[e._v(e._s("✓"))]):!1===e.value?a("span",{staticClass:"text-danger"},[e._v(e._s("✗"))]):a("span",[e._v("-")])},Q=[],ee={props:{value:{type:Boolean,required:!1,default:null}},setup:function(){return{}}},te=ee,ae=a("2877"),re=Object(ae["a"])(te,Z,Q,!1,null,null,null),ne=re.exports,ie={components:{TickOrCross:ne},props:{mode:{type:String,required:!1,default:"contexts",validator:function(e){return-1!==["phases","groups","subgroups","contexts","datings","periods","stratigraphy","stratigraphyold"].indexOf(e.toLowerCase())}},previewRowCount:{type:Number,required:!1,default:5},defaultDelimiter:{type:String,required:!1,default:","}},setup:function(e){var t=Object(n["c"])("store"),a=Object(n["i"])(""),r=Object(n["h"])(e.defaultDelimiter),i=[{value:"\\t",text:"Tab"},{value:",",text:"Comma"},{value:";",text:"Semicolon"},{value:"|",text:"Pipe"},{value:" ",text:"Space"}],o=Object(n["h"])(!0),s=Object(n["h"])(null),l=Object(n["h"])(""),c=Object(n["h"])("append"),u=Object(n["a"])((function(){switch(e.mode.toLowerCase()){case"phases":return["siteCode","phaseID","minYear","maxYear","description","withinPeriod"];case"groups":return["siteCode","groupID","groupType","cud","description","withinPeriod","withinPhase"];case"subgroups":return["siteCode","subgroupID","subgroupType","cud","description","withinPeriod","withinGroup"];case"contexts":return["siteCode","contextID","contextType","cud","description","withinPeriod","withinPhase","withinGroup","withinSubGroup"];case"stratigraphyold":return["siteCode","contextNo","contextType","stratRelationship","relatedContextNo"];case"stratigraphy":return["siteCode","sourceID","stratRelationship","targetID"];case"datings":return["siteCode","datingID","datingType","minYear","maxYear","description","withinPeriod","withinContext"];case"periods":return["periodID","minYear","maxYear","description","uri"];default:return[]}})),d=Object(n["a"])((function(){var e=(((m||{}).value||{}).meta||{}).fields||[];return e.map((function(e){return{key:e,label:e}}))})),m=Object(n["a"])((function(){var t={delimiter:r.value,encoding:"UTF-8",header:o.value,preview:e.previewRowCount,skipEmptyLines:"greedy"},a=g.a.parse(l.value,t);return a})),h=function(e){if(e){var t=new FileReader;t.onload=function(e){l.value=e.target.result},t.readAsText(e)}},y=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",a.value=t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a={encoding:"UTF-8",delimiter:r.value,header:o.value,skipEmptyLines:"greedy"},y("Parsing delimited data..."),n=g.a.parse(l.value,a),y("Parsing delimited data...done"),y("Importing delimited data..."),t.t0=e.mode,t.next="phases"===t.t0?8:"groups"===t.t0?11:"subgroups"===t.t0?14:"contexts"===t.t0?17:"datings"===t.t0?20:"periods"===t.t0?23:"stratigraphy"===t.t0?26:"stratigraphyold"===t.t0?29:32;break;case 8:return t.next=10,D(n.data);case 10:return t.abrupt("break",32);case 11:return t.next=13,w(n.data);case 13:return t.abrupt("break",32);case 14:return t.next=16,I(n.data);case 16:return t.abrupt("break",32);case 17:return t.next=19,S(n.data);case 19:return t.abrupt("break",32);case 20:return t.next=22,_(n.data);case 22:return t.abrupt("break",32);case 23:return t.next=25,N(n.data);case 25:return t.abrupt("break",32);case 26:return t.next=28,T(n.data);case 28:return t.abrupt("break",32);case 29:return t.next=31,Y(n.data);case 31:return t.abrupt("break",32);case 32:y("Importing delimited data...done"),C();case 34:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){return C()};Object(n["f"])((function(){return C()}));var C=function(){s.value=null,l.value="",y("")},D=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(a){var r,n,i,o,s,l,c,u,d,p,b,m,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=new Map,t.getters.phases.forEach((function(e){r.set(e.data.label||"label",e)})),n=new Map,t.getters.periods.forEach((function(e){n.set(e.data.label||"label",e)})),i=Object(f["a"])(a);try{for(i.s();!(o=i.n()).done;)s=o.value,l=E(s.siteCode||""),c=E(s.phaseID||""),u=k(s.minYear||null),d=k(s.maxYear||null),p=E(s.description||""),b=E(s.withinPeriod||""),r.has(c)||r.set(c,t.getters.newPhase()),m=J()({},r.get(c)),m.data.siteCode=l,m.data.label=c,m.data.dating.minYear=u,m.data.dating.maxYear=d,m.data.description=p,b&&(n.has(b)||(g=t.getters.newPeriod(),g.data.label=b,n.set(b,g),t.dispatch("updateNode",g)),m.data.period=n.get(b).data.id),r.set(c,m),t.dispatch("updateNode",m)}catch(h){i.e(h)}finally{i.f()}case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(a){var r,n,i,o,s,l,c,u,d,p,b,m,g,h,v,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=new Map,t.getters.groups.forEach((function(e){r.set(e.data.label||"label",e)})),n=new Map,t.getters.phases.forEach((function(e){n.set(e.data.label||"label",e)})),i=new Map,t.getters.periods.forEach((function(e){i.set(e.data.label||"label",e)})),o=Object(f["a"])(a);try{for(o.s();!(s=o.n()).done;)l=s.value,c=E(l.siteCode||""),u=E(l.groupID||""),d=E(l.groupType||""),p=E(l.cud||"").toUpperCase(),b=E(l.description||""),m=E(l.withinPeriod||""),g=E(l.withinPhase||""),r.has(u)||r.set(u,t.getters.newGroup()),h=J()({},r.get(u)),h.data.siteCode=c,h.data.label=u,h.data.cud=p,h.data.type=d,h.data.description=b,g&&(n.has(g)||(v=t.getters.newPhase(),v.data.label=g,v.data.siteCode=c,n.set(g,v),t.dispatch("updateNode",v)),h.data.parent=n.get(g).data.id),m&&(i.has(m)||(y=t.getters.newPeriod(),y.data.label=m,i.set(m,y),t.dispatch("updateNode",y)),h.data.period=i.get(m).data.id),r.set(u,h),t.dispatch("updateNode",h)}catch(O){o.e(O)}finally{o.f()}case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(a){var r,n,i,o,s,l,c,u,d,p,b,m,g,h,v,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=new Map,t.getters.subgroups.forEach((function(e){r.set(e.data.label||"label",e)})),n=new Map,t.getters.groups.forEach((function(e){n.set(e.data.label||"label",e)})),i=new Map,t.getters.periods.forEach((function(e){i.set(e.data.label||"label",e)})),o=Object(f["a"])(a);try{for(o.s();!(s=o.n()).done;)l=s.value,c=E(l.siteCode||""),u=E(l.subgroupID||""),d=E(l.subgroupType||""),p=E(l.cud||"").toUpperCase(),b=E(l.description||""),m=E(l.withinPeriod||""),g=E(l.withinGroup||""),r.has(u)||r.set(u,t.getters.newSubGroup()),h=J()({},r.get(u)),h.data.siteCode=c,h.data.label=u,h.data.cud=p,h.data.type=d,h.data.description=b,g&&(n.has(g)||(v=t.getters.newGroup(),v.data.siteCode=c,v.data.label=g,n.set(g,v),t.dispatch("updateNode",v)),h.data.parent=n.get(g).data.id),m&&(i.has(m)||(y=t.getters.newPeriod(),y.data.label=m,i.set(m,y),t.dispatch("updateNode",y)),h.data.period=i.get(m).data.id),r.set(u,h),t.dispatch("updateNode",h)}catch(O){o.e(O)}finally{o.f()}case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(a){var r,n,i,o,s,l,c,u,d,p,b,m,g,h,v,y,O,x,C,D,w,I;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=new Map,t.getters.contexts.forEach((function(e){r.set(e.data.label||"label",e)})),n=new Map,t.getters.groups.forEach((function(e){n.set(e.data.label||"label",e)})),i=new Map,t.getters.subgroups.forEach((function(e){i.set(e.data.label||"label",e)})),o=new Map,t.getters.phases.forEach((function(e){o.set(e.data.label||"label",e)})),s=new Map,t.getters.periods.forEach((function(e){s.set(e.data.label||"label",e)})),l=Object(f["a"])(a);try{for(l.s();!(c=l.n()).done;)u=c.value,d=E(u.siteCode),p=E(u.contextID),b=E(u.contextType),m=E(u.cud).toUpperCase(),g=E(u.description),h=E(u.withinPeriod),v=E(u.withinPhase),y=E(u.withinGroup),O=E(u.withinSubGroup),r.has(p)||r.set(p,t.getters.newContext()),x=J()({},r.get(p)),x.data.siteCode=d,x.data.label=p,x.data.type=b,x.data.cud=m,x.data.description=g,h&&(s.has(h)||(C=t.getters.newPeriod(),C.data.label=h,s.set(h,C),t.dispatch("updateNode",C)),x.data.period=s.get(h).data.id),O?(i.has(O)||(D=t.getters.newSubGroup(),D.data.siteCode=d,D.data.label=O,i.set(O,D),t.dispatch("updateNode",D)),x.data.parent=i.get(O).data.id):y?(n.has(y)||(w=t.getters.newGroup(),w.data.siteCode=d,w.data.label=y,n.set(y,w),t.dispatch("updateNode",w)),x.data.parent=n.get(y).data.id):v&&(o.has(v)||(I=t.getters.newPhase(),I.data.siteCode=d,I.data.label=v,o.set(v,I),t.dispatch("updateNode",I)),x.data.parent=o.get(v).data.id),r.set(p,x),t.dispatch("updateNode",x)}catch(k){l.e(k)}finally{l.f()}case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(a){var r,n,i,o,s,l,c,u,d,p,b,m,g,h,v,y,O;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=new Map,t.getters.datings.forEach((function(e){r.set(e.data.label||"label",e)})),n=new Map,t.getters.contexts.forEach((function(e){n.set(e.data.label||"label",e)})),i=new Map,t.getters.periods.forEach((function(e){i.set(e.data.label||"label",e)})),o=Object(f["a"])(a);try{for(o.s();!(s=o.n()).done;)l=s.value,c=E(l.siteCode),u=E(l.datingID),d=E(l.datingType),p=k(l.minYear||null),b=k(l.maxYear||null),m=E(l.description),g=E(l.withinPeriod),h=E(l.withinContext),r.has(u)||r.set(u,t.getters.newDating()),v=J()({},r.get(u)),v.data.siteCode=c,v.data.label=u,v.data.type=d,v.data.description=m,v.data.dating.minYear=p,v.data.dating.maxYear=b,h&&(n.has(h)||(y=t.getters.newContext(),y.data.siteCode=c,y.data.label=h,n.set(h,y),t.dispatch("updateNode",y)),v.data.parent=n.get(h).data.id),g&&(i.has(g)||(O=t.getters.newPeriod(),O.data.label=g,i.set(g,O),t.dispatch("updateNode",O)),v.data.period=i.get(g).data.id),r.set(u,v),t.dispatch("updateNode",v)}catch(x){o.e(x)}finally{o.f()}case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(a){var r,n,i,o,s,l,c,u,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=new Map,t.getters.periods.forEach((function(e){r.set(e.data.label||"label",e)})),n=Object(f["a"])(a);try{for(n.s();!(i=n.n()).done;)o=i.value,s=E(o.periodID),l=k(o.minYear||null),c=k(o.maxYear||null),u=E(o.description),d=E(o.uri),r.has(s)||r.set(s,t.getters.newPeriod()),p=J()({},r.get(s)),p.data.label=s,p.data.dating.minYear=l,p.data.dating.maxYear=c,p.data.description=u,p.data.uri=d,r.set(s,p),t.dispatch("updateNode",p)}catch(b){n.e(b)}finally{n.f()}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(a){var r,n,i,o,s,l,c,u,d,p,b,m,g,h,y,O,x,C;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=new Map,t.getters.contexts.forEach((function(e){r.set(e.data.label||"label",e)})),n=function(e,t){return"".concat(j(e),"|").concat(j(t))},i=new Map,t.getters.edges.forEach((function(e){var t=n(e.data.source,e.data.target);i.set(t,e)})),o=Object(f["a"])(a);try{for(o.s();!(s=o.n()).done;)l=s.value,c=E(l.siteCode),u=E(l.sourceID),d=E(l.targetID),p=j(l.stratRelationship),""!==u&&""!==d&&u!==d&&(r.has(u)||r.set(u,t.getters.newContext()),b=J()({},r.get(u)),b.data.siteCode=c,b.data.label=u,r.set(u,b),t.dispatch("updateNode",b),r.has(d)||(m=t.getters.newContext(),m.data.siteCode=c,m.data.label=d,r.set(d,m),t.dispatch("updateNode",m)),g=r.get(u).data.id,h=r.get(d).data.id,p==v.ABOVE||p==v.EQUAL?(y=n(g,h),i.has(y)||(O=t.getters.newEdge(),O.data.siteCode=c,O.data.source=g,O.data.target=h,O.data.type=p,i.set(y,O),t.dispatch("updateEdge",O))):p==v.BELOW&&(x=n(h,g),i.has(x)||(C=t.getters.newEdge(),C.data.siteCode=c,C.data.source=h,C.data.target=g,C.data.type=v.ABOVE,i.set(x,C),t.dispatch("updateEdge",C))))}catch(D){o.e(D)}finally{o.f()}case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(a){var r,n,i,o,s,l,c,u,d,b,m,g,h,y,O,x,C,D,w,I;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=new Map,t.getters.contexts.forEach((function(e){r.set(e.data.label||"label",e)})),n=new Map,i=new Map,o=Object(f["a"])(a);try{for(o.s();!(s=o.n()).done;)l=s.value,c=E(l.siteCode),u=E(l.contextNo),d=E(l.contextType),b=j(l.stratRelationship),m=E(l.relatedContextNo),""!==u&&""!==m&&(g=null,g=n.has(u)?n.get(u):t.getters.newContext(),g.data.siteCode=c,g.data.label=u,g.data.type=d,n.set(u,g),n.has(m)||(h=t.getters.newContext(),h.data.siteCode=c,h.data.label=m,n.set(m,h)),y=t.getters.newEdge(),O=n.get(u),x=O.data.id,C=n.get(m),D=C.data.id,b==v.ABOVE||b==v.EQUAL?(w="edge-".concat(u,"-").concat(m),y.data.siteCode=c,y.data.source=x,y.data.target=D,y.data.type=b,i.set(w,y)):b==v.BELOW&&(I="edge-".concat(m,"-").concat(u),y.data.siteCode=c,y.data.source=D,y.data.target=x,y.data.type=v.ABOVE,i.set(I,y)))}catch(k){o.e(k)}finally{o.f()}return e.next=8,t.dispatch("insertNodes",Object(p["a"])(n.values()));case 8:t.dispatch("insertEdges",Object(p["a"])(i.values()));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{statusMsg:a,expectedFields:u,delimiter:r,delimiterOptions:i,hasHeader:o,selectedFile:s,parserPreview:m,fields:d,overwriteOrAppend:c,handleOK:O,handleClose:x,loadFile:h}}},oe=ie,se=Object(ae["a"])(oe,u,d,!1,null,null,null),le=se.exports,ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{attrs:{centered:"",id:"modalPeriodsImport",title:"Import Perio.do data"},on:{ok:e.handleOK,cancel:e.handleClose,close:e.handleClose},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var r=t.ok,n=t.cancel;return[a("b-button",{staticClass:"float-right",attrs:{pill:"",variant:"primary",size:"md"},on:{click:function(e){return r()}}},[a("TickOrCross",{staticClass:"mr-1",attrs:{value:!0}}),a("span",[e._v("OK")])],1),a("b-button",{staticClass:"float-right mr-1",attrs:{pill:"",variant:"secondary",size:"md"},on:{click:function(e){return n()}}},[a("TickOrCross",{staticClass:"mr-1",attrs:{value:!1}}),a("span",[e._v("Cancel")])],1)]}}])},[a("b-container",{staticClass:"p-0"},[a("b-row",{attrs:{"align-h":"between"}},[a("b-col",[a("b-button",{staticClass:"text-left shadow",attrs:{pill:"",size:"sm",variant:"primary",title:"refresh",alt:"refresh"},on:{click:function(t){return t.stopPropagation(),e.refresh.apply(null,arguments)}}},[a("b-icon-arrow-clockwise",{staticClass:"mr-2"}),a("span",[e._v("Refresh")])],1)],1),a("b-col",[a("b-form-group",{staticClass:"mb-2",attrs:{label:"Filter","label-for":"periods-filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"},scopedSlots:e._u([{key:"label",fn:function(){return[a("b-icon-search")]},proxy:!0}])},[a("b-form-input",{staticClass:"shadow-sm",attrs:{size:"sm",id:"periods-filter-input",type:"search",autocomplete:"off",placeholder:"filter"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)],1)],1),a("b-row",[a("b-col",[a("b-overlay",{attrs:{show:e.busy,rounded:"sm"}},[a("b-form-group",{attrs:{label:"Collections","label-for":"collectionList","label-size":"sm"},scopedSlots:e._u([{key:"label",fn:function(){return[a("span",[e._v("Collections")]),a("b-badge",{staticClass:"border secondary pb-1 m-0 ml-2",attrs:{variant:"outline"}},[a("span",[e._v(e._s(e.collections.length))])])]},proxy:!0}])},[a("b-table",{staticClass:"overflow-auto shadow-sm",staticStyle:{height:"300px"},attrs:{"show-empty":"",hover:"",outlined:"",selectable:"",small:"",id:"periods-table","no-border-collapse":!1,"sticky-header":"300px","select-mode":"single","primary-key":"id",items:e.collections,fields:e.fields,filter:e.filter,"sort-by":e.sortBy,"sort-desc":e.sortDesc},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},"row-selected":e.rowSelected}})],1),a("b-form-group",{attrs:{label:"Periods","label-for":"periodsList","label-size":"sm"},scopedSlots:e._u([{key:"label",fn:function(){return[a("span",[e._v("Periods")]),a("b-badge",{staticClass:"border secondary pb-1 m-0 ml-2",attrs:{variant:"outline"}},[a("span",[e._v(e._s(e.periods.length))])])]},proxy:!0}])},[a("b-list-group",{staticClass:"shadow-sm overflow-auto m-1",staticStyle:{height:"175px"},attrs:{size:"sm"}},e._l(e.periods,(function(t,r){return a("b-list-group-item",{key:r,attrs:{size:"sm"}},[a("a",{attrs:{target:"_blank",href:""+e.baseURI+t.id}},[e._v(e._s(t.label))]),e._v("  "),a("span",[e._v("["+e._s(e.periodCoverage(t))+"]")])])})),1)],1)],1)],1)],1)],1)],1)},ue=[],de=(a("07ac"),a("4de4"),a("4e82"),a("b0c0"),{components:{TickOrCross:ne},setup:function(){var e=Object(n["c"])("store"),t=Object(n["h"])(!1),a="https://n2t.net/ark:/99152/p0d.json",r=Object(n["i"])({}),i=Object(n["h"])(""),o=Object(n["h"])(""),s=Object(n["h"])("title"),l=Object(n["h"])(!1),c=[{key:"title",label:"title",sortable:!0},{key:"year",label:"year",sortable:!0,class:"text-right"},{key:"periods",label:"periods",sortable:!0,class:"text-right"}],u=Object(n["a"])((function(){return(((r.value||{})["@context"]||[])[1]||{})["@base"]||""})),d=Object(n["a"])((function(){var e=(r.value||{}).authorities||null,t=e?Object.values(e):[];return t.filter((function(e){var t;return""!==((null===(t=e.source)||void 0===t?void 0:t.title)||"")})).map((function(e){var t,a;return{id:e.id,title:null===(t=e.source)||void 0===t?void 0:t.title,year:null===(a=e.source)||void 0===a?void 0:a.yearPublished,periods:Object.values(e.periods).length}}))})),p=Object(n["a"])((function(){var e=i.value?b(i.value):[];return e.sort((function(e,t){return e.label>t.label?1:-1}))})),f=function(e){e.length>0&&(i.value=e[0].id)},b=function(e){var t=((r.value||{}).authorities||{})[e],a=t?t.periods:null;return a?Object.values(a):[]},m=function(e){return e.spatialCoverage?e.spatialCoverage.map((function(e){return e.label||""})).filter((function(e){return e})).join(", "):e.spatialCoverageDescription?e.spatialCoverageDescription:""},g=function(e){var t,a,n,i=((r.value||{}).authorities||{})[e];if(!i)return"";var o=((null===(t=i.source)||void 0===t?void 0:t.creators)||[]).map((function(e){return(e.name||"").trim()})).filter((function(e){return e})).join(", "),s=null===(a=i.source)||void 0===a?void 0:a.yearPublished,l=null===(n=i.source)||void 0===n?void 0:n.title;return"<b>".concat(o,"</b> (").concat(s,")<br><i>").concat(l,"</i>")},h=function(){t.value=!0,fetch(a).then((function(e){return e.json()})).then((function(e){r.value=e,t.value=!1})).catch((function(e){console.log(e),t.value=!1}))},v=function(){p.value.forEach((function(t){var a,r,n,i,o,s,l,c,d=e.getters.newPeriod();d.data.id="period-".concat(t.id),d.data.label=t.label,d.data.uri="".concat(u.value).concat(t.id),d.data.description=t.note||"",d.data.dating.minYear=Number((null===(a=t.start)||void 0===a||null===(r=a.in)||void 0===r?void 0:r.year)||(null===(n=t.start)||void 0===n||null===(i=n.in)||void 0===i?void 0:i.earliestYear)),d.data.dating.maxYear=Number((null===(o=t.stop)||void 0===o||null===(s=o.in)||void 0===s?void 0:s.year)||(null===(l=t.stop)||void 0===l||null===(c=l.in)||void 0===c?void 0:c.latestYear)),e.dispatch("updateNode",d)}))},y=function(){return r.value=null},O=function(e){return i.value=e};return{busy:t,data:r,selectedID:i,filter:o,sortBy:s,sortDesc:l,collections:d,periods:p,fields:c,baseURI:u,rowSelected:f,periodsForID:b,periodCoverage:m,referenceForID:g,refresh:h,handleOK:v,handleClose:y,selected:O}}}),pe=de,fe=Object(ae["a"])(pe,ce,ue,!1,null,null,null),be=fe.exports,me=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},ge=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{attrs:{centered:"",id:"modalAbout",title:"About "+e.store.getters.appName},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div")]},proxy:!0}])},[a("div",{staticClass:"text-center"},[a("img",{staticClass:"mb-3",attrs:{src:"phaser-spacedout-logo.png",width:"444",height:"118"}}),a("p",[e._v("Version "+e._s(e.store.getters.appVersion))]),a("p",[e._v("A stratigraphic matrix editing tool")]),a("p",[e._v("Created as part of the MATRIX project")]),a("a",{attrs:{target:"_blank",href:"https://stratigraphic.github.io/matrix/"}},[e._v("https://stratigraphic.github.io/matrix/")])])])}],he={setup:function(){var e=Object(n["c"])("store");return{store:e}}},ve=he,ye=Object(ae["a"])(ve,me,ge,!1,null,null,null),Oe=ye.exports,xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return""!==e.nodeClass?a("span",{staticClass:"mr-1 p-0",attrs:{title:e.nodeClass,alt:e.nodeClass}},[a("svg",{attrs:{height:e.height,width:e.width,role:"img",alt:"icon"}},[a("rect",{attrs:{x:e.strokeWidth/2,y:e.strokeWidth/2,width:e.width-e.strokeWidth,height:e.height-e.strokeWidth,rx:3,ry:3,"stroke-width":e.strokeWidth,fill:e.reversed?e.fgColor:e.bgColor,stroke:e.fgColor,"stroke-dasharray":e.dashed?"2 2":""}}),a("text",{attrs:{x:"50%",y:e.height/2+e.strokeWidth/2,"alignment-baseline":"middle","dominant-baseline":"middle","text-anchor":"middle",stroke:e.reversed?e.bgColor:e.fgColor,"stroke-width":.5,"font-size":e.height-4*e.strokeWidth}},[e._v(e._s(e.iconText))])])]):e._e()},Ce=[],De={props:{width:{type:Number,required:!1,default:16},height:{type:Number,required:!1,default:16},nodeClass:{type:String,required:!1,default:""},dashed:{type:Boolean,required:!1,default:!1},reversed:{type:Boolean,required:!1,default:!1},selected:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:""}},setup:function(e){var t=2,a=Object(n["a"])((function(){var t=x.CONTEXT_BG;switch(e.nodeClass){case y.PHASE:t=x.PHASE_BG;break;case y.GROUP:t=x.GROUP_BG;break;case y.SUBGROUP:t=x.SUBGROUP_BG;break;case y.CONTEXT:t=x.CONTEXT_BG;break;case y.PERIOD:t=x.PERIOD_BG;break;case y.DATING:t=x.DATING_BG;break}return e.selected&&(t=x.SELECTED_BG),t})),r=Object(n["a"])((function(){var t=x.CONTEXT_FG;switch(e.nodeClass){case y.PHASE:t=x.PHASE_FG;break;case y.GROUP:t=x.GROUP_FG;break;case y.SUBGROUP:t=x.SUBGROUP_FG;break;case y.CONTEXT:t=x.CONTEXT_FG;break;case y.PERIOD:t=x.PERIOD_FG;break;case y.DATING:t=x.DATING_FG;break}return t})),i=Object(n["a"])((function(){return e.label?e.label:e.nodeClass==y.PERIOD?"T":e.nodeClass.slice(0,1).toUpperCase()}));return{strokeWidth:t,fgColor:r,bgColor:a,iconText:i}}},we=De,Ie=Object(ae["a"])(we,xe,Ce,!1,null,null,null),ke=Ie.exports,Ee=new r["default"],je=Ee,Se={components:{CsvImport:le,PeriodsImport:be,HelpAbout:Oe,NodeIcon:ke},setup:function(e,t){var a=Object(n["c"])("store"),r=function(){return document.getElementById("fileOpen").click()},i=Object(n["a"])({get:function(){return a.getters.diagramLock},set:function(e){a.dispatch("setDiagramLock",e)}}),o=function(){return i.value=!i.value},s=Object(n["a"])({get:function(){return a.getters.paginated},set:function(e){a.dispatch("setPaginated",e)}}),l=function(){return s.value=!s.value},u=function(){t.root.$bvModal.msgBoxConfirm("This will clear all current data, are you sure?",{size:"sm",buttonSize:"sm",centered:!0,okTitle:"Yes",cancelTitle:"No"}).then((function(e){e&&(a.dispatch("clearAll"),je.$emit("diagram-clear"))}))},d=Object(n["h"])("contexts"),p=function(e){return d.value=e},f=function(e){if(e){je.$emit("diagram-clear");var t=new FileReader;t.onload=function(e){var t=JSON.parse(e.target.result);a.dispatch("loadMatrixData",t)},t.readAsText(e)}},b=function(){var e={modified:(new Date).toISOString(),appversion:"".concat(a.getters.appName," v").concat(a.getters.appVersion)},t={about:J()({},a.getters.about,e),elements:{nodes:a.getters.nodes,edges:a.getters.edges}},r="phaser-".concat(D(),".json");E(JSON.stringify(t),r)},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",a="";switch(e){case y.PHASE:a=h(t);break;case y.GROUP:a=v(t);break;case y.SUBGROUP:a=x(t);break;case y.CONTEXT:a=C(t);break;case y.DATING:a=w(t);break;case y.PERIOD:a=I(t);break;case O.EDGE:a=k(t);break}var r="phaser-".concat(e,"s-").concat(D(),".csv");E(a,r)},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:",",t=a.getters.phases.map((function(e){return{siteCode:e.data.siteCode||"",phaseID:e.data.label||"",minYear:e.data.dating.minYear,maxYear:e.data.dating.maxYear,description:e.data.description||"",withinPeriod:a.getters.labelByID(e.data.period)}})),r=g.a.unparse(JSON.stringify(t),{delimiter:e});return r},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:",",t=a.getters.groups.map((function(e){return{siteCode:e.data.siteCode||"",groupID:e.data.label||"",groupType:e.data.type||"",cud:e.data.cud||"",description:e.data.description||"",withinPeriod:a.getters.labelByID(e.data.period),withinPhase:a.getters.labelByID(e.data.parent)}})),r=g.a.unparse(JSON.stringify(t),{delimiter:e});return r},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:",",t=a.getters.subgroups.map((function(e){return{siteCode:e.data.siteCode||"",subgroupID:e.data.label||"",subgroupType:e.data.type||"",cud:e.data.cud||"",description:e.data.description||"",withinPeriod:a.getters.labelByID(e.data.period),withinGroup:a.getters.labelByID(e.data.parent)}})),r=g.a.unparse(JSON.stringify(t),{delimiter:e});return r},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:",",t=a.getters.contexts.map((function(e){var t,r,n=a.getters.nodeByID(e.data.parent),i=(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.class)||"",o=(null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.label)||"";return{siteCode:e.data.siteCode||"",contextID:e.data.label||"",contextType:e.data.type||"",cud:e.data.cud||"",description:e.data.description||"",withinPeriod:a.getters.labelByID(e.data.period),withinPhase:i==y.PHASE?o:"",withinGroup:i==y.GROUP?o:"",withinSubGroup:i==y.SUBGROUP?o:""}})),r=g.a.unparse(JSON.stringify(t),{delimiter:e});return r},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:",",t=a.getters.datings.map((function(e){return{siteCode:e.data.siteCode||"",datingID:e.data.label||"",datingType:e.data.type||"",description:e.data.description||"",minYear:e.data.dating.minYear,maxYear:e.data.dating.maxYear,withinPeriod:a.getters.labelByID(e.data.period),withinContext:a.getters.labelByID(e.data.parent)}})),r=g.a.unparse(JSON.stringify(t),{delimiter:e});return r},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:",",t=a.getters.periods.map((function(e){return{periodID:e.data.label||"",description:e.data.description||"",uri:e.data.uri||"",minYear:e.data.dating.minYear,maxYear:e.data.dating.maxYear}})),r=g.a.unparse(JSON.stringify(t),{delimiter:e});return r},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:",",t=a.getters.edges.map((function(e){return{siteCode:e.data.siteCode||"",sourceID:a.getters.labelByID(e.data.source),stratRelationship:e.data.type||"",targetID:a.getters.labelByID(e.data.target)}})),r=g.a.unparse(JSON.stringify(t),{delimiter:e});return r},E=function(e,t){var a=new Blob([e],{type:"text/plain;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(a,t);else{var r=document.createElement("a");if(void 0!==r.download){var n=URL.createObjectURL(a);r.setAttribute("href",n),r.setAttribute("download",t),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}}},j=function(){return je.$emit("diagram-export-part-png")},S=function(){return je.$emit("diagram-export-full-png")},_=function(){return je.$emit("diagram-refresh")},N=function(){return je.$emit("diagram-zoom-in")},T=function(){return je.$emit("diagram-zoom-out")},Y=function(){return je.$emit("diagram-zoom-fit")},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dagre";return je.$emit("diagram-redo-layout",e)};return Object(c["a"])({store:a,console:console,locked:i,paginated:s,toggleLock:o,togglePagination:l,NodeClass:y,setupModal:p,csvImportMode:d,openFileDialog:r,clearAll:u,loadJSON:f,saveJSON:b,saveDelimited:m,saveToFile:E,exportPartPNG:j,exportFullPNG:S,diagramRefresh:_,diagramZoomIn:N,diagramZoomOut:T,diagramZoomFit:Y,diagramRedoLayout:P},"store",a)}},_e=Se,Ne=(a("774f"),Object(ae["a"])(_e,s,l,!1,null,"746a0760",null)),Te=Ne.exports,Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-tabs",{staticClass:"my-1",attrs:{align:"left","active-nav-item-class":"font-weight-bold"},on:{"activate-tab":e.activated},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[e._l(e.nodeClasses,(function(t){return a("b-tab",{key:t,staticClass:"my-2",scopedSlots:e._u([{key:"title",fn:function(){return[a("NodeIcon",{attrs:{nodeClass:t}}),a("span",[e._v(e._s(t+"s ["+e.itemCount(t)+"]"))])]},proxy:!0}],null,!0)},[a("ItemEditor",{attrs:{selectedID:e.selectedID,itemClass:t}})],1)})),a("b-tab",{key:e.EdgeClass.EDGE,staticClass:"my-2",scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s("stratigraphy ["+e.itemCount(e.EdgeClass.EDGE)+"]"))]},proxy:!0}])},[a("ItemEditor",{attrs:{selectedID:e.selectedID,itemClass:e.EdgeClass.EDGE}})],1),a("b-tab",{attrs:{lazy:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Validation")]},proxy:!0}])},[a("ValidationAsync")],1),a("b-tab",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Temporal")]},proxy:!0}])},[a("TemporalRelationships")],1),a("b-tab",{attrs:{lazy:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Metadata")]},proxy:!0}])},[a("MetaEditor")],1),a("b-tab",{attrs:{lazy:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Search"),a("br"),e._v("(experimental)")]},proxy:!0}])},[a("SearchControls")],1),a("b-tab",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Group Matrix"),a("br"),e._v("(experimental)")]},proxy:!0}])},[a("GroupMatrixTable")],1)],2)},Pe=[],Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{staticClass:"p-2",attrs:{fluid:""}},[a("ItemTable",{staticClass:"mb-2",attrs:{selectedID:e.selectedID,itemClass:e.itemClass},on:{"item-selected":e.itemSelected,"item-deleted":e.itemDeleted}}),e.fields.includes("connectedElements")?a("b-form-row",[a("b-col",[a("ConnectedElements",{attrs:{contextID:((e.selectedItem||{}).data||{}).id}})],1)],1):e._e(),a("b-form-row",[a("b-col",[e.fields.includes("redolayout")?a("div",{staticStyle:{"text-align":"right"}},[a("b-button",{staticClass:"text-left shadow",attrs:{pill:"",size:"sm",disabled:e.disabled||e.store.getters.diagramLock,variant:"primary",title:"redo layout",alt:"redo layout"},on:{click:function(t){return t.stopPropagation(),e.redoCompoundNodeLayout.apply(null,arguments)}}},[a("b-icon-diagram-3",{staticClass:"mr-2"}),a("span",[e._v(e._s("Redo layout for this "+e.itemClass))])],1)],1):e._e()])],1),a("b-form-row",[a("b-col",[e.fields.includes("sitecode")?a("ItemLabel",{staticClass:"m-2",attrs:{disabled:e.disabled,label:"Site code",placeholder:"site code"},on:{input:e.siteCodeChanged},model:{value:((e.selectedItem||{}).data||{}).siteCode,callback:function(t){e.$set((e.selectedItem||{}).data||{},"siteCode",t)},expression:"((selectedItem || {}).data || {}).siteCode"}}):e._e(),e.fields.includes("uri")?a("ItemLabel",{staticClass:"m-2",attrs:{disabled:e.disabled,label:"URI",placeholder:""+e.itemClass},on:{input:e.uriChanged},model:{value:((e.selectedItem||{}).data||{}).uri,callback:function(t){e.$set((e.selectedItem||{}).data||{},"uri",t)},expression:"((selectedItem || {}).data || {}).uri"}}):e._e(),e.fields.includes("period")?a("ItemLookup2",{staticClass:"m-2",attrs:{label:"Period",disabled:e.disabled,placeholder:"period",options:e.periodLookupOptions},on:{change:e.periodChanged},model:{value:((e.selectedItem||{}).data||{}).period,callback:function(t){e.$set((e.selectedItem||{}).data||{},"period",t)},expression:"((selectedItem || {}).data || {}).period"}}):e._e(),e.fields.includes("type")?a("ItemLookup",{staticClass:"m-2",attrs:{label:"Type",mode:"input",disabled:e.disabled,placeholder:e.itemClass+" type",options:e.typeLookupOptions},on:{change:e.typeChanged},model:{value:((e.selectedItem||{}).data||{}).type,callback:function(t){e.$set((e.selectedItem||{}).data||{},"type",t)},expression:"((selectedItem || {}).data || {}).type"}}):e._e()],1),a("b-col",[e.fields.includes("label")?a("ItemLabel",{staticClass:"m-2",attrs:{disabled:e.disabled,label:"Identifier",placeholder:e.itemClass+" identifier"},on:{input:e.labelChanged},model:{value:((e.selectedItem||{}).data||{}).label,callback:function(t){e.$set((e.selectedItem||{}).data||{},"label",t)},expression:"((selectedItem || {}).data || {}).label"}}):e._e(),e.fields.includes("parent")?a("ItemLookup2",{staticClass:"m-2",attrs:{label:"Within",disabled:e.disabled,placeholder:e.itemClass+" parent",options:e.parentLookupOptions},on:{change:e.parentChanged},model:{value:((e.selectedItem||{}).data||{}).parent,callback:function(t){e.$set((e.selectedItem||{}).data||{},"parent",t)},expression:"((selectedItem || {}).data || {}).parent"}}):e._e(),e.fields.includes("cud")?a("ItemLookup",{staticClass:"m-2",attrs:{label:"CUD",alt:"Construction/Use/Disuse",title:"Construction/Use/Disuse",disabled:e.disabled,options:[{value:"C",text:"construction"},{value:"U",text:"use"},{value:"D",text:"disuse"},{value:"CU",text:"construction & use"},{value:"CD",text:"construction & disuse"},{value:"UD",text:"use & disuse"},{value:"CUD",text:"construction & use & disuse"}]},on:{change:e.cudChanged},model:{value:((e.selectedItem||{}).data||{}).cud,callback:function(t){e.$set((e.selectedItem||{}).data||{},"cud",t)},expression:"((selectedItem || {}).data || {}).cud"}}):e._e()],1)],1),a("b-form-row",[e.fields.includes("contains")?a("b-col",[a("ItemContains",{staticClass:"m-2",attrs:{id:((e.selectedItem||{}).data||{}).id,disabled:e.disabled}})],1):e._e(),e.fields.includes("description")?a("b-col",[a("div",{staticClass:"m-2"},[a("b-input-group-prepend",[e._v("Description")]),a("b-form-textarea",{staticClass:"shadow-sm w-100",staticStyle:{resize:"vertical"},attrs:{size:"sm",disabled:e.disabled,placeholder:e.itemClass+" description",rows:"5","max-rows":"5",name:"itemDescription"},on:{change:e.descriptionChanged},model:{value:((e.selectedItem||{}).data||{}).description,callback:function(t){e.$set((e.selectedItem||{}).data||{},"description","string"===typeof t?t.trim():t)},expression:"((selectedItem || {}).data || {}).description"}})],1)]):e._e()],1),a("b-form-row",[a("b-col",[e.fields.includes("yearrange")?a("DatingYearRangeCE",{attrs:{disabled:e.disabled,dating:((e.selectedItem||{}).data||{}).dating},on:{change:e.datingChanged}}):e._e(),e.fields.includes("scidating")?a("SciDating",{attrs:{disabled:e.disabled,dating:((e.selectedItem||{}).data||{}).dating},on:{change:e.datingChanged}}):e._e()],1)],1),a("b-form-row",[a("b-col",[e.fields.includes("included")?a("b-form-checkbox",{attrs:{disabled:e.disabled,value:!0,"unchecked-value":!1,name:"check-button",switch:""},on:{change:e.includeChanged},model:{value:((e.selectedItem||{}).data||{}).included,callback:function(t){e.$set((e.selectedItem||{}).data||{},"included",t)},expression:"((selectedItem || {}).data || {}).included"}},[e._v("Included in calculations")]):e._e()],1),a("b-col",[e.fields.includes("association")?a("b-form-group",{attrs:{label:"Association","label-for":"itemAssociation"}},[a("b-form-select",{staticClass:"shadow-sm",attrs:{disabled:this.disabled,name:"itemAssociation",options:[{value:"direct",text:"direct"},{value:"residual",text:"residual"},{value:"intrusive",text:"intrusive"},{value:"other",text:"other"}]},on:{change:e.associationChanged},model:{value:((e.selectedItem||{}).data||{}).association,callback:function(t){e.$set((e.selectedItem||{}).data||{},"association",t)},expression:"((selectedItem || {}).data || {}).association"}})],1):e._e()],1)],1),e.fields.includes("stratigraphy")?a("b-form-row",[a("b-col",[a("Stratigraphy")],1)],1):e._e()],1)},Be=[],Ge=(a("caad"),a("2532"),a("0644"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{staticClass:"p-0",attrs:{fluid:""}},[a("b-overlay",{attrs:{show:e.isBusy,rounded:"sm"}},[a("b-row",{attrs:{"align-h":"between"}},[a("b-col",["edge"!==e.itemClass?a("b-button",{staticClass:"text-left shadow",attrs:{pill:"",size:"sm",variant:"primary",title:"add "+e.itemClass,alt:"add "+e.itemClass},on:{click:function(t){return t.stopPropagation(),e.insertItem()}}},[a("b-icon-plus"),e._v("Add "+e._s(e.itemClass))],1):e._e(),a("b-button",{staticClass:"m-1 shadow",attrs:{pill:"",size:"sm",variant:"primary",type:"reset",title:"Copy table to clipboard",alt:"Copy table to clipboard",disabled:0==e.items.length},on:{click:e.copyToClipboard}},[a("b-icon-clipboard-plus",{staticClass:"mr-2"}),a("span",[e._v("Copy to clipboard")])],1)],1),a("b-col",[a("b-form-group",{staticClass:"mr-1",attrs:{"label-cols-sm":"3","label-align-sm":"right","label-size":"sm"},scopedSlots:e._u([{key:"label",fn:function(){return[a("b-icon-funnel")]},proxy:!0}])},[a("b-form-input",{staticClass:"shadow-sm",attrs:{size:"sm",id:"filter-input",disabled:0==e.items.length,type:"search",autocomplete:"off",placeholder:"filter "+e.itemClass+" records"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),a("div",{staticClass:"text-secondary text-right"},[e._v("Showing "+e._s(e.filterCount)+" of "+e._s(e.items.length))])],1)],1)],1),a("b-row",[a("b-col",[a("b-table",{ref:"datatable",staticClass:"overflow-auto shadow-sm",staticStyle:{height:"200px",resize:"vertical"},attrs:{"show-empty":"","sort-icon-left":"",hover:"",outlined:"",selectable:"",small:"",id:"datatable-"+e.itemClass,"no-border-collapse":!0,"sticky-header":!0,"select-mode":"single","primary-key":"data.id","per-page":e.paginated?e.perPage:0,"current-page":e.currentPage,items:e.items,fields:e.fields,filter:e.filter,"filter-ignored-fields":["data","position"],"tbody-tr-class1":e.rowClass},on:{filtered:e.onFiltered,"row-selected":e.rowSelected},scopedSlots:e._u([{key:"cell(actions)",fn:function(t){return[a("div",{staticClass:"text-right"},[a("b-icon-x-circle",{staticClass:"action mr-2",attrs:{width:"15",height:"15",title:"delete "+e.itemClass+" "+(t.item.data.label||""),alt:"delete "+e.itemClass+" "+(t.item.data.label||"")},on:{click:function(a){return a.stopPropagation(),e.deleteItem(t.item)}}})],1)]}},{key:"cell(nodeLabel)",fn:function(e){return[a("NodeIconLink",{attrs:{nodeID:e.item.data.id}})]}},{key:"cell(periodLabel)",fn:function(e){return[a("NodeIconLink",{attrs:{nodeID:e.item.data.period}})]}},{key:"cell(sourceLabel)",fn:function(e){return[a("NodeIconLink",{attrs:{nodeID:e.item.data.source}})]}},{key:"cell(targetLabel)",fn:function(e){return[a("NodeIconLink",{attrs:{nodeID:e.item.data.target}})]}},{key:"cell(parentLabel)",fn:function(e){return[a("NodeIconLink",{attrs:{nodeID:e.item.data.parent}})]}},{key:"cell(included)",fn:function(e){return[a("TickOrCross",{attrs:{value:e.item.data.included}})]}}])})],1)],1)],1),a("b-row",[a("b-col",[e.paginated?a("b-pagination",{attrs:{size:"sm","total-rows":e.filterCount,"per-page":e.perPage,"aria-controls":"my-table","first-number":!0,"last-number":!0},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}):e._e()],1)],1)],1)}),Le=[],Ue=(a("c740"),a("b65f"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.nodeID?a("a",{attrs:{href:"#"},on:{click:function(t){return t.stopPropagation(),e.store.dispatch("setSelectedID",e.nodeID)}}},[a("NodeIcon",{attrs:{nodeClass:e.nodeClass,selected:!1,reversed:e.reversed}}),a("span",[e._v(e._s(e.nodeLabel))])],1):e._e()}),Ae=[],Fe={components:{NodeIcon:ke},props:{nodeID:{type:String,required:!1,default:""}},setup:function(e){var t=Object(n["c"])("store"),a=Object(n["a"])((function(){return t.getters.classByID(e.nodeID)})),r=Object(n["a"])((function(){return t.getters.labelByID(e.nodeID)})),i=Object(n["a"])((function(){return a.value==y.CONTEXT&&t.getters.contextHasDating(e.nodeID)}));return{store:t,reversed:i,nodeClass:a,nodeLabel:r}}},ze=Fe,Me=(a("e41d"),Object(ae["a"])(ze,Ue,Ae,!1,null,"d626506e",null)),Ve=Me.exports,He={components:{NodeIconLink:Ve,TickOrCross:ne},props:{selectedID:{type:String,required:!1,default:""},itemClass:{type:String,required:!1,default:y.PHASE,validator:function(e){return[].concat(Object(p["a"])(Object.values(y)),Object(p["a"])(Object.values(O))).includes(e)}}},setup:function(e,t){var a=Object(n["c"])("store"),r=Object(n["i"])(null),i=Object(n["h"])(""),o=function(e,t){return D.value=t},s=Object(n["h"])("data.label"),l=Object(n["h"])(!1),u=25,d=Object(n["h"])(1),f=Object(n["h"])(!1),m=Object(n["a"])((function(){return a.getters.paginated})),h=Object(n["a"])((function(){return e.selectedID}));Object(n["k"])(h,function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(i){var o,s,l,c,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["d"])();case 2:if(o=a.getters.isNode(i)?a.getters.nodeByID(i):a.getters.edgeByID(i),S(o,e.itemClass)){t.next=5;break}return t.abrupt("return");case 5:return s=1,x.value.length>u&&(c=((null===(l=r.value)||void 0===l?void 0:l.sortedItems)||[]).findIndex((function(e){return e.data.id===i})),s=Math.trunc(c/u)+1),d.value!==s&&(d.value=s),t.next=10,Object(n["d"])();case 10:p=document.getElementById("datatable-".concat(e.itemClass,"__row_").concat(i)),p&&(p.click(),p.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),p.scrollIntoViewIfNeeded(!0));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var v=function(e,t){return e&&"row"===t&&e.data.id==h.value?"selected-row":""},x=Object(n["a"])((function(){switch(e.itemClass){case y.PHASE:return a.getters.phases;case y.GROUP:return a.getters.groups;case y.SUBGROUP:return a.getters.subgroups;case y.CONTEXT:return a.getters.contexts;case y.DATING:return a.getters.datings;case y.PERIOD:return a.getters.periods;case O.EDGE:return a.getters.edges;default:return[]}})),C=Object(n["a"])((function(){return x.value.length})),D=Object(n["h"])(x.value.length);Object(n["k"])(C,(function(e){return D.value=e}));var w=Object(n["a"])((function(){switch(e.itemClass){case y.PHASE:return["label","enteredMinYear","enteredMaxYear","enteredDiff","derivedMinYear","derivedMaxYear","duration","period"];case y.GROUP:return["label","type","parent","derivedMinYear","derivedMaxYear","duration","period"];case y.SUBGROUP:return["label","type","parent","derivedMinYear","derivedMaxYear","duration","period"];case y.CONTEXT:return["label","type","parent","derivedMinYear","derivedMaxYear","duration","period"];case y.DATING:return["label","type","parent","enteredMinYear","enteredMaxYear","enteredDiff","included","period"];case y.PERIOD:return["label","enteredMinYear","enteredMaxYear","enteredDiff"];case O.EDGE:return["source","type","target","derivedMinDuration","derivedMaxDuration"];default:return[]}})),I=function(){var e=Object(n["j"])(x).map((function(e){var t={};return Object(n["j"])(w).forEach((function(r){switch(r){case"label":t[r]=e.data.label;break;case"period":t[r]=a.getters.labelByID(e.data.period);break;case"source":t[r]=a.getters.labelByID(e.data.source);break;case"target":t[r]=a.getters.labelByID(e.data.target);break;case"type":t[r]=e.data.type;break;case"parent":t[r]=a.getters.labelByID(e.data.parent);break;case"enteredMinYear":t[r]=Y(null,null,e);break;case"enteredMaxYear":t[r]=P(null,null,e);break;case"enteredDiff":t[r]=L(null,null,e);break;case"derivedMinYear":t[r]=R(null,null,e);break;case"derivedMaxYear":t[r]=B(null,null,e);break;case"duration":t[r]=G(null,null,e);break;case"derivedMinDuration":t[r]=U(null,null,e);break;case"derivedMaxDuration":t[r]=A(null,null,e);break;case"included":t[r]=e.data.included;break}})),t})),t=g.a.unparse(JSON.stringify(e),{delimiter:"\t"});navigator.clipboard.writeText(t)},k=Object(n["a"])((function(){return[].concat(Object(p["a"])(w.value.includes("label")?[{key:"nodeLabel",label:"identifier",sortable:!0,sortByFormatted:!0,filterByFormatted:!0,formatter:function(e,t,a){return a.data.label}}]:[]),Object(p["a"])(w.value.includes("period")?[Object(c["a"])({key:"periodLabel",label:"period",sortable:!0,sortByFormatted:!0,filterByFormatted:!0,formatter:function(e,t,r){return a.getters.labelByID(r.data.period)}},"sortable",!0)]:[]),Object(p["a"])(w.value.includes("source")?[{key:"sourceLabel",label:"source",sortable:!0,sortByFormatted:!0,filterByFormatted:!0,formatter:function(e,t,r){return a.getters.labelByID(r.data.source)}}]:[]),Object(p["a"])(w.value.includes("type")?[{key:"type",label:"type",sortable:!0,sortByFormatted:!0,filterByFormatted:!0,formatter:function(e,t,a){return a.data.type}}]:[]),Object(p["a"])(w.value.includes("target")?[{key:"targetLabel",label:"target",sortable:!0,sortByFormatted:!0,filterByFormatted:!0,formatter:function(e,t,r){return a.getters.labelByID(r.data.target)}}]:[]),Object(p["a"])(w.value.includes("parent")?[{key:"parentLabel",label:"within",sortable:!0,sortByFormatted:!0,filterByFormatted:!0,formatter:function(e,t,r){return a.getters.labelByID(r.data.parent)}}]:[]),Object(p["a"])(w.value.includes("enteredMinYear")?[{key:"minyear",label:"entered min year",sortByFormatted:!0,filterByFormatted:!0,formatter:Y,sortable:!0,class:"text-right"}]:[]),Object(p["a"])(w.value.includes("enteredMaxYear")?[{key:"maxyear",label:"entered max year",sortByFormatted:!0,filterByFormatted:!0,formatter:P,sortable:!0,class:"text-right"}]:[]),Object(p["a"])(w.value.includes("enteredDiff")?[{key:"entereddiff",label:"duration",sortByFormatted:!0,filterByFormatted:!0,formatter:L,sortable:!0,class:"text-right"}]:[]),Object(p["a"])(w.value.includes("derivedMinYear")?[{key:"derivedminyear",label:"derived min year",sortByFormatted:!0,filterByFormatted:!0,formatter:R,sortable:!0,class:"text-right"}]:[]),Object(p["a"])(w.value.includes("derivedMaxYear")?[{key:"derivedmaxyear",label:"derived max year",sortByFormatted:!0,filterByFormatted:!0,formatter:B,sortable:!0,class:"text-right"}]:[]),Object(p["a"])(w.value.includes("duration")?[{key:"duration",label:"duration",sortByFormatted:!0,filterByFormatted:!0,formatter:G,sortable:!0,class:"text-right"}]:[]),Object(p["a"])(w.value.includes("derivedMinDuration")?[{key:"derivedminduration",label:"min duration",sortByFormatted:!0,filterByFormatted:!0,formatter:U,sortable:!0,class:"text-right"}]:[]),Object(p["a"])(w.value.includes("derivedMaxDuration")?[{key:"derivedmaxduration",label:"max duration",sortByFormatted:!0,filterByFormatted:!0,formatter:A,sortable:!0,class:"text-right"}]:[]),Object(p["a"])(w.value.includes("included")?[{key:"included",label:"included",sortable:!0,class:"text-center",sortByFormatted:!0,filterByFormatted:!0,formatter:function(e,t,a){return a.data.included}}]:[]),[{key:"actions",label:""}])})),E=function(){var t=null,r=null;switch(e.itemClass){case y.PHASE:t=J()({},a.getters.newPhase());break;case y.GROUP:t=J()({},a.getters.newGroup());break;case y.SUBGROUP:t=J()({},a.getters.newSubGroup());break;case y.CONTEXT:t=J()({},a.getters.newContext());break;case y.DATING:t=J()({},a.getters.newDating());break;case y.PERIOD:t=J()({},a.getters.newPeriod());break;case O.EDGE:r=J()({},a.getters.newEdge());break}t?(a.dispatch("insertNode",t),a.dispatch("setSelectedID",t.data.id)):r&&(a.dispatch("insertEdge",r),a.dispatch("setSelectedID",r.data.id))},j=function(t){t&&(e.itemClass===O.EDGE?a.dispatch("updateEdge",t):a.dispatch("updateNode",t))},_=function(r){var n="Delete ".concat(e.itemClass,' "').concat(r.data.label,'" - are you sure?');t.root.$bvModal.msgBoxConfirm(n).then((function(n){n&&(t.emit("item-deleted",r.data.id),e.itemClass==O.EDGE?a.dispatch("deleteEdge",r):a.dispatch("deleteNode",r))}))},N=function(e){e.length>0&&t.emit("item-selected",e[0])},T=function(e,t,a){return null==e||""==e?"":0==t?Number(e):"".concat(e,"±").concat(t).concat("years"==a?"y":"%")},Y=function(e,t,a){var r,n=(null===(r=a.data)||void 0===r?void 0:r.dating)||{},i=n.minYear,o=n.minYearTolValue,s=n.minYearTolUnit;return T(i,o,s)},P=function(e,t,a){var r,n=(null===(r=a.data)||void 0===r?void 0:r.dating)||{},i=n.maxYear,o=n.maxYearTolValue,s=n.maxYearTolUnit;return T(i,o,s)},R=function(e,t,r){return a.getters.derivedDates(r.data.id).minYear},B=function(e,t,r){return a.getters.derivedDates(r.data.id).maxYear},G=function(e,t,r){return a.getters.derivedDuration(r.data.id)},L=function(e,t,r){return a.getters.enteredDuration(r.data.id)},U=function(e,t,r){return a.getters.derivedMinDuration(r.data.id)},A=function(e,t,r){return a.getters.derivedMaxDuration(r.data.id)};return{store:a,datatable:r,filter:i,isBusy:f,sortBy:s,sortDesc:l,paginated:m,items:x,columns:w,fields:k,perPage:u,currentPage:d,rowCount:C,insertItem:E,updateItem:j,deleteItem:_,copyToClipboard:I,rowSelected:N,rowClass:v,filterCount:D,onFiltered:o,NodeClass:y,tableMinYearFormat:Y,tableMaxYearFormat:P,derivedMinYearFormat:R,derivedMaxYearFormat:B,derivedMinDurationFormat:U,derivedMaxDurationFormat:A,durationFormat:G,enteredDiffFormat:L}}},$e=He,qe=(a("feda"),Object(ae["a"])($e,Ge,Le,!1,null,"74398aac",null)),Xe=qe.exports,We=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-input-group-prepend",[e._v(e._s(e.label))]),"select"==e.mode?a("b-input-group",{attrs:{label:e.label,"label-for":"itemSelector",prepend1:e.label,size:"sm"}},[a("b-form-select",{staticClass:"shadow-sm w-100",attrs:{plain:"",size:"sm",variant:"primary",disabled:e.disabled,name:"itemSelector",placeholder:e.placeholder,value:e.value,options:e.optionsForSelect},on:{change:function(t){return e.changed(t)}}})],1):a("b-input-group",{attrs:{label:e.label,"label-for":"itemInput",size:"sm",prepend1:e.label}},[a("b-form-input",{staticClass:"shadow-sm w-100",attrs:{text:"",size:"sm",disabled:e.disabled,name:"itemInput",placeholder:e.placeholder,value:e.value,type:"text",list:e.optionsId,autocomplete:"off"},on:{change:function(t){return e.changed(t)}}}),a("b-form-datalist",{attrs:{id:e.optionsId,options:e.optionsForInput}})],1)],1)},Ke=[],Je=a("98dc"),Ze=a.n(Je),Qe={props:{disabled:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:"Select item"},placeholder:{type:String,required:!1,default:""},value:{type:String},optionNone:{type:Boolean,required:!1,default:!0},mode:{type:String,required:!1,default:"select",validator:function(e){return["select","input"].includes(e)}},options:{type:Array,required:!1,default:function(){return[]}}},setup:function(e,t){var a=Ze()("datalist-"),r=Object(n["a"])((function(){return e.options.concat(e.optionNone?[{value:"",text:"(none)",selected:!0}]:[]).sort((function(e,t){return(e.text||e.value||"")>(t.text||t.value||"")?1:-1}))})),i=Object(n["a"])((function(){return e.options.map((function(e){return e.text||""})).filter((function(e){return e})).sort((function(e,t){return e>t?1:-1}))})),o=function(e){return t.emit("change",e)};return{optionsId:a,optionsForSelect:r,optionsForInput:i,changed:o}}},et=Qe,tt=Object(ae["a"])(et,We,Ke,!1,null,null,null),at=tt.exports,rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-input-group-prepend",[e._v(e._s(e.label))]),a("b-dropdown",{ref:"dropdown",staticClass:"shadow-sm w-100",attrs:{block:"",split:"",size:"sm",disabled:e.disabled,"menu-class":"w-100","split-variant":"link bg-white border-secondary","split-href":"#",variant:"primary border-secondary"},scopedSlots:e._u([{key:"button-content",fn:function(){return[a("NodeIconLink",{attrs:{nodeID:e.value}})]},proxy:!0},{key:"default",fn:function(){return[a("b-form-select",{staticClass:"shadow-sm p-0 m-0",attrs:{id:e.selectorID,disabled:e.disabled,"select-size":8,value:e.value,options:e.options},on:{change:e.onChange,blur:e.onBlur},scopedSlots:e._u([{key:"first",fn:function(){return[e.optionNone?a("b-form-select-option",{attrs:{value:""}},[e._v("(none)")]):e._e()]},proxy:!0}])})]},proxy:!0}])})],1)},nt=[],it=(a("7db0"),a("5db7"),a("73d9"),{components:{NodeIconLink:Ve},props:{disabled:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:"Select item"},value:{type:String,required:!1,default:""},optionNone:{type:Boolean,required:!1,default:!0},options:{type:Array,required:!1,default:function(){return[]}}},setup:function(e,t){var a=Object(n["c"])("store"),r=Ze()("selector-"),i=Object(n["h"])(null),o=Object(n["a"])((function(){var t=e.options.flatMap((function(e){return e.options?e.options:[e]})).find((function(t){return t.value==e.value}));return t?t.text:a.getters.labelByID(e.value,!1)})),s=function(e){i.value.hide(),t.emit("change",e)},l=function(){return i.value.hide()};return{store:a,dropdown:i,selectorID:r,selectedOptionLabel:o,onChange:s,onBlur:l}}}),ot=it,st=(a("25ad"),Object(ae["a"])(ot,rt,nt,!1,null,"6c97e642",null)),lt=st.exports,ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-form-group",{staticClass:"border m-0 p-1 shadow",attrs:{label:"Stratigraphy"}},[a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{label:"Source context"}},[a("vue-bootstrap-typeahead",{attrs:{size:"sm",disabled:e.disabled,data:e.nodeOptions,serializer:function(e){return e.text},minMatchingChars:1,maxMatches:5},on:{hit:e.sourceSelected},model:{value:e.sourceID,callback:function(t){e.sourceID=t},expression:"sourceID"}})],1)],1),a("b-col",[a("b-form-group",{attrs:{label:"Relationship"}},[a("b-form-select",{staticClass:"shadow-sm",attrs:{size:"sm",disabled:e.disabled,name:"edgeTypeSelector",placeholder:"relationship",options:e.edgeOptions},model:{value:e.edgeType,callback:function(t){e.edgeType=t},expression:"edgeType"}})],1)],1),a("b-col",[a("b-form-group",{attrs:{label:"Target context"}},[a("vue-bootstrap-typeahead",{attrs:{size:"sm",data:e.nodeOptions,serializer:function(e){return e.text},minMatchingChars:1,maxMatches:5},on:{hit:e.targetSelected},model:{value:e.targetID,callback:function(t){e.targetID=t},expression:"targetID"}})],1)],1),a("b-col")],1),a("b-form-row",[a("b-col",{staticClass:"text-center"},[a("NodeIconLink",{attrs:{nodeID:e.sourceID}})],1),a("b-col",{staticClass:"text-center"},[a("span",[e._v(e._s(e.edgeType))])]),a("b-col",{staticClass:"text-center"},[a("NodeIconLink",{attrs:{nodeID:e.targetID}})],1),a("b-col",[a("b-form-group",[a("b-button",{staticClass:"text-left shadow",attrs:{pill:"",size:"sm",disabled:!e.addEnabled,variant:"primary",title:"add",alt:"add"},on:{click:function(t){return t.stopPropagation(),e.addItem.apply(null,arguments)}}},[a("b-icon-plus"),a("span",[e._v("Add relationship")])],1)],1)],1)],1)],1)],1)},ut=[],dt=a("d45f"),pt={components:{ItemLookup:at,VueBootstrapTypeahead:dt["a"],NodeIconLink:Ve},props:{disabled:{type:Boolean,required:!1,default:!1}},setup:function(e){var t=Object(n["c"])("store"),a=Object(n["h"])(null),r=Object(n["h"])(null),i=Object(n["h"])(v.ABOVE),o=Object(n["a"])((function(){return 0==e.disabled&&a.value!==r.value&&t.getters.isNode(a.value)&&t.getters.isNode(r.value)&&Object.values(v).includes(i.value)})),s=function(e){a.value=e.value},l=function(e){r.value=e.value},c=Object(n["a"])((function(){return t.getters.contexts.map((function(e){return{value:e.data.id,text:e.data.label}})).sort((function(e,t){return e.text>t.text?1:-1}))})),u=[v.ABOVE,v.EQUAL].map((function(e){return{value:e,text:e}})),d=function(){var e=t.getters.newEdge();e.data.source=a.value,e.data.target=r.value,e.data.type=i.value,t.dispatch("updateEdge",e)};return{store:t,addEnabled:o,nodeOptions:c,edgeOptions:u,addItem:d,sourceID:a,targetID:r,edgeType:i,sourceSelected:s,targetSelected:l}}},ft=pt,bt=(a("35ae"),Object(ae["a"])(ft,ct,ut,!1,null,"171be137",null)),mt=bt.exports,gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-form-group",{staticClass:"px-0 shadow-sm",attrs:{label:""}},[a("b-form-row",[a("b-col",[a("b-form-group",{staticClass:"p-1",attrs:{"valid-feedback":"","invalid-feedback":e.validationMessage,state:e.validateMinYear}},[a("DatingYearCE",{staticClass:"w-100 m-1",attrs:{label:"Minimum (earliest) Year",disabled:e.disabled,placeholder:"Minimum year",name:"minYearInput",year:e.local.minYear},on:{change:function(t){return e.changed("minYear",t)}}}),e.showTolerances?a("DatingYearTolerance",{staticClass:"w-100 m-1",attrs:{disabled:e.disabled,"tolerance-value":e.local.minYearTolValue,"tolerance-unit":e.local.minYearTolUnit},on:{"change-value":function(t){return e.changed("minYearTolValue",t)},"change-unit":function(t){return e.changed("minYearTolUnit",t)}}}):e._e()],1)],1),a("b-col",[a("b-form-group",{staticClass:"p-1",attrs:{"valid-feedback":"","invalid-feedback":e.validationMessage,state:e.validateMaxYear}},[a("DatingYearCE",{staticClass:"w-100 m-1",attrs:{label:"Maximum (latest) year",disabled:e.disabled,year:e.local.maxYear,placeholder:"Maximum year",name:"maxYearInput"},on:{change:function(t){return e.changed("maxYear",t)}}}),e.showTolerances?a("DatingYearTolerance",{staticClass:"w-100 m-1",attrs:{disabled:e.disabled,"tolerance-value":e.local.maxYearTolValue,"tolerance-unit":e.local.maxYearTolUnit},on:{"change-value":function(t){return e.changed("maxYearTolValue",t)},"change-unit":function(t){return e.changed("maxYearTolUnit",t)}}}):e._e()],1)],1)],1)],1)},ht=[],vt=a("5530"),yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m-0 p-0"},[a("b-input-group",{staticClass:"shadow-sm",attrs:{prepend:"±",size:"sm"}},[a("b-form-input",{attrs:{number:"",min:"0",disabled:e.disabled,placeholder:"tolerance",type:"number",value:e.toleranceValue},on:{change:e.valueChanged}}),a("b-input-group-append",[a("b-form-select",{attrs:{size:"sm",value:e.toleranceUnit,options:e.tolUnits,disabled:e.disabled},on:{change:e.unitChanged}})],1)],1)],1)},Ot=[],xt={props:{disabled:{type:Boolean,required:!1,default:!1},toleranceValue:{type:Number,required:!1,default:0},toleranceUnit:{type:String,required:!1,default:"years",validator:function(e){return-1!==["years","percent"].indexOf(e)}}},setup:function(e,t){var a=[{value:"years",text:"years"},{value:"percent",text:"%"}],r=function(e){return t.emit("change-value",k(e,0))},n=function(e){return t.emit("change-unit",e)};return{tolUnits:a,valueChanged:r,unitChanged:n}}},Ct=xt,Dt=Object(ae["a"])(Ct,yt,Ot,!1,null,null,null),wt=Dt.exports,It=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m-0 p-0"},[a("b-input-group-prepend",[e._v(e._s(e.label))]),a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{number:"",min:"0",disabled:e.disabled,placeholder:e.placeholder,name:"yearInput",type:"number",value:e.yearDisplay},on:{input:function(t){return e.yearChanged(t)}}}),a("b-input-group-append",[a("b-form-checkbox",{attrs:{button:"","button-variant":"secondary",size:"sm",disabled:e.disabled,value:e.isYearBCE},on:{change:function(t){return e.suffixChanged(t)}}},[e._v(e._s(e.isYearBCE?"BCE":"CE"))])],1)],1)],1)},kt=[],Et={props:{disabled:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:"Year"},placeholder:{type:String,required:!1,default:"year"},year:{type:Number,required:!1,default:null}},setup:function(e,t){var a=Object(n["a"])({get:function(){return Math.abs(e.year)},set:function(e){i(e)}}),r=Object(n["a"])({get:function(){return e.year<0},set:function(e){o(e)}}),i=function(e){t.emit("change",e*(r.value?-1:1))},o=function(e){t.emit("change",a.value*(e?1:-1))};return{yearDisplay:a,isYearBCE:r,yearChanged:i,suffixChanged:o}}},jt=Et,St=Object(ae["a"])(jt,It,kt,!1,null,null,null),_t=St.exports,Nt={components:{DatingYearCE:_t,DatingYearTolerance:wt},props:{disabled:{type:Boolean,required:!1,default:!1},dating:{type:Object,required:!1,default:function(){return{}}},showTolerances:{type:Boolean,required:!1,default:!0}},setup:function(e,t){var a=(new Date).getFullYear(),r=Object(n["a"])((function(){var t=e.dating||{};return{minYear:Number(t["minYear"]||null),maxYear:Number(t["maxYear"]||null),minYearTolValue:Number(t["minYearTolValue"]||0),maxYearTolValue:Number(t["maxYearTolValue"]||0),minYearTolUnit:t["minYearTolUnit"]||"years",maxYearTolUnit:t["maxYearTolUnit"]||"years"}})),i=Object(n["a"])((function(){return Number.isInteger(r.value.minYear)&&r.value.minYear<=r.value.maxYear&&r.value.minYear<=a})),o=Object(n["a"])((function(){return Number.isInteger(r.value.maxYear)&&r.value.minYear<=r.value.maxYear&&r.value.maxYear<=a})),s=Object(n["a"])((function(){return Number.isInteger(r.value.minYear)&&Number.isInteger(r.value.maxYear)?r.value.minYear>r.value.maxYear?"Min year cannot exceed max year":r.value.minYear>a?"Min year cannot exceed current year":"something else wrong":"Please enter a valid year"})),l=function(a,r){t.emit("change",Object(vt["a"])(Object(vt["a"])({},e.dating),{},Object(c["a"])({},a,r)))};return{local:r,validateMinYear:i,validateMaxYear:o,validationMessage:s,changed:l}}},Tt=Nt,Yt=Object(ae["a"])(Tt,gt,ht,!1,null,"4d9fe275",null),Pt=Yt.exports,Rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-form-checkbox",{attrs:{switch:"",id:"sciDating",name:"sciDating",disabled:e.disabled,checked:(e.dating||{}).isSciDating,value:!0,"unchecked-value":!1},on:{change:e.checkboxChanged}},[e._v("Scientific dating?")]),(e.dating||{}).isSciDating?a("SciDatingFields",{attrs:{disabled:e.disabled,dating:e.dating},on:{change:e.datingChanged}}):a("DatingYearRangeCE",{attrs:{disabled:e.disabled,dating:e.dating},on:{change:e.datingChanged}})],1)},Bt=[],Gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-form-group",{staticClass:"px-2 shadow-sm",attrs:{label:"Raw Dates: 14C age in 14C yr BP"},scopedSlots:e._u([{key:"label",fn:function(){return[a("span",[e._v("Raw Dates: ")]),a("span",{staticStyle:{"font-style":"italic"}},[e._v("14C age in 14C yr BP")])]},proxy:!0}])},[a("b-form-row",[a("b-col",[a("b-form-group",{staticClass:"my-2",attrs:{label:"Minimum (Earliest) year","label-for":"minRawYearInput"}},[a("b-form-input",{staticClass:"shadow-sm",attrs:{string:"",disabled:e.disabled,placeholder:"14C age in 14C yr BP",name:"minRawYearInput",value:e.local.label},on:{change:function(t){return e.changed("label",t)}}})],1),a("b-input-group",{staticClass:"my-2",attrs:{prepend:"±",append:"years"}},[a("b-form-input",{staticClass:"shadow-sm",attrs:{string:"",disabled:e.disabled,placeholder:"Error Value +/-",name:"errorValue",value:e.local.errorValue},on:{change:function(t){return e.changed("errorValue",t)}}})],1)],1),a("b-col",[a("b-form-group",{staticClass:"my-2",attrs:{label:"Laboratory code for determination","label-for":"labCode"}},[a("b-input-group",{attrs:{prepend:"Lab Code"}},[a("b-form-input",{staticClass:"shadow-sm",attrs:{string:"",disabled:e.disabled,placeholder:"Laboratory code",name:"labCode",value:e.local.labCode},on:{change:function(t){return e.changed("labCode",t)}}})],1)],1),a("b-input-group",{staticClass:"my-2"},[a("b-form-input",{staticClass:"shadow-sm",attrs:{string:"",disabled:e.disabled,placeholder:"The sample code of material dated",name:"sampleCode",value:e.local.sampleCode},on:{change:function(t){return e.changed("sampleCode",t)}}})],1)],1)],1)],1),a("b-form-group",{staticClass:"px-2 shadow-sm",attrs:{label:"Calibrated Dates"}},[a("b-form-row",[a("b-col",[a("b-form-group",{staticClass:"my-2",attrs:{label:"Minimum (Earliest) year","label-for":"minYearInput"}},[a("b-form-input",{staticClass:"shadow-sm",attrs:{number:"",disabled:e.disabled,placeholder:"Minimum year",name:"minYearInput",value:e.local.minYear},on:{change:function(t){return e.changed("minYear",t)}}})],1),a("b-input-group",{staticClass:"my-2"},[a("b-form-input",{staticClass:"shadow-sm",attrs:{string:"",disabled:e.disabled,placeholder:"1st/2nd/3rd Sigma?",name:"minYearSigma",value:e.local.minYearSigma},on:{change:function(t){return e.changed("minYearSigma",t)}}})],1)],1),a("b-col",[a("b-form-group",{staticClass:"my-2",attrs:{label:"Maximum (Latest) year","label-for":"maxYearInput"}},[a("b-form-input",{staticClass:"shadow-sm",attrs:{number:"",disabled:e.disabled,placeholder:"Maximum year",name:"maxYearInput",value:e.local.maxYear},on:{change:function(t){return e.changed("maxYear",t)}}})],1),a("b-input-group",{staticClass:"my-2"},[a("b-form-input",{staticClass:"shadow-sm",attrs:{string:"",disabled:e.disabled,placeholder:"1st/2nd/3rd Sigma?",name:"maxYearSigma",value:e.local.maxYearSigma},on:{change:function(t){return e.changed("maxYearSigma",t)}}})],1)],1)],1)],1)],1)},Lt=[],Ut={props:{disabled:{type:Boolean,required:!1,default:!1},dating:{type:Object,required:!1,default:null}},setup:function(e,t){var a=Object(n["a"])((function(){var t=e.dating||{};return{minYear:Number(t["minYear"]||null),maxYear:Number(t["maxYear"]||null),minYearTolValue:Number(t["minYearTolValue"]||0),maxYearTolValue:Number(t["maxYearTolValue"]||0),minYearTolUnit:t["minYearTolUnit"]||"years",maxYearTolUnit:t["maxYearTolUnit"]||"years",minYearSigma:t["minYearSigma"]||"",maxYearSigma:t["maxYearSigma"]||"",label:t["label"]||"",labCode:t["labCode"]||"",sampleCode:t["sampleCode"]||"",errorValue:t["errorValue"]||""}})),r=function(a,r){return t.emit("change",Object(vt["a"])(Object(vt["a"])({},e.dating),{},Object(c["a"])({},a,r)))};return{local:a,changed:r}}},At=Ut,Ft=Object(ae["a"])(At,Gt,Lt,!1,null,null,null),zt=Ft.exports,Mt={components:{DatingYearRangeCE:Pt,SciDatingFields:zt},props:{disabled:{type:Boolean,required:!1,default:!1},dating:{type:Object,required:!1,default:null}},setup:function(e,t){var a=function(e){return t.emit("change",e)},r=function(t){if(e.dating){var r=Object.assign({},e.dating);r.isSciDating=t,a(r)}};return{datingChanged:a,checkboxChanged:r}}},Vt=Mt,Ht=Object(ae["a"])(Vt,Rt,Bt,!1,null,null,null),$t=Ht.exports,qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-input-group-prepend",[e._v(e._s(e.label))]),a("b-form-input",{staticClass:"shadow-sm w-100",attrs:{text:"",size:"sm",id:e.identifier,disabled:e.disabled,placeholder:e.placeholder,value:e.value,type:"text",name:"itemLabel",autocomplete:"off",variant:"primary"},on:{input:e.changed}})],1)},Xt=[],Wt={props:{id:{type:String,required:!1,default:null},disabled:{type:Boolean,required:!1,default:!1},placeholder:{type:String,required:!1,default:""},value:{type:String,required:!1,default:""},label:{type:String,required:!1,default:"Identifier"}},setup:function(e,t){var a=Object(n["a"])((function(){return e.id||Ze()("itemlabel-")})),r=function(e){return t.emit("input",e)};return{identifier:a,changed:r}}},Kt=Wt,Jt=Object(ae["a"])(Kt,qt,Xt,!1,null,null,null),Zt=Jt.exports,Qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-overlay",{attrs:{show:e.busy}},[a("b-input-group-prepend",[e._v("Contains")]),a("b-list-group",{staticClass:"shadow-sm border overflow-auto",staticStyle:{height:"90px",resize:"vertical"},attrs:{name:"contains",disabled:e.disabled}},e._l(e.items,(function(e,t){return a("b-list-group-item",{key:t,staticClass:"px-2 py-0 m-0"},[a("NodeIconLink",{attrs:{nodeID:e.data.id}})],1)})),1)],1)},ea=[],ta={name:"ItemContains",components:{NodeIconLink:Ve},props:{id:{type:String,required:!1,default:null},disabled:{type:Boolean,required:!1,default:!1}},setup:function(e){var t=Object(n["c"])("store"),a=Object(n["h"])([]),r=Object(n["h"])(!1),i=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.getters.nodeByID(r),n&&(Y(n)?a.value=t.getters.nodes.filter((function(e){return e.data.period===r})):a.value=t.getters.descendantsOfID(r));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=Object(n["a"])((function(){return e.id}));return Object(n["k"])(o,function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.value=!0,a.value=[],e.next=4,i(t);case 4:r.value=!1;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{immediate:!0}),{store:t,items:a,busy:r}}},aa=ta,ra=(a("0d3f"),Object(ae["a"])(aa,Qt,ea,!1,null,"3a3af516",null)),na=ra.exports,ia=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("span",[e._v("Derived relationships")]),a("StatusKey"),a("b-table",{ref:"relationships",staticClass:"shadow-sm",staticStyle:{height:"150px",resize:"vertical"},attrs:{"sort-icon-left":"",outlined:"",small:"","show-empty":"",id:"relationships","no-border-collapse":!0,"sticky-header":!0,items:e.tableData,fields:e.tableFields,"tbody-tr-class":e.rowClass},scopedSlots:e._u([{key:"cell(sourceLabel)",fn:function(e){return[a("NodeIconLink",{attrs:{nodeID:e.item.sourceID}})]}},{key:"cell(targetLabel)",fn:function(e){return[a("NodeIconLink",{attrs:{nodeID:e.item.targetID}})]}},{key:"cell(sourceDates)",fn:function(e){return[a("YearRangeDisplay",{attrs:{minYear:e.item.sourceDates.minYear,maxYear:e.item.sourceDates.maxYear,showDuration:!0}})]}},{key:"cell(targetDates)",fn:function(e){return[a("YearRangeDisplay",{attrs:{minYear:e.item.targetDates.minYear,maxYear:e.item.targetDates.maxYear,showDuration:!0}})]}}])})],1)},oa=[],sa=(a("6062"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return null!==e.minYear&&null!==e.maxYear?a("span",[a("span",[e._v(e._s(e.minYear))]),a("b-icon-arrow-right-short"),a("span",[e._v(e._s(e.maxYear))]),e.showDuration?a("span",{staticClass:"ml-1"},[e._v(e._s("("+e.duration+")"))]):e._e()],1):a("span")}),la=[],ca={props:{minYear:{type:Number,required:!1,default:null},maxYear:{type:Number,required:!1,default:null},showDuration:{type:Boolean,required:!1,default:!1}},setup:function(e){var t=Object(n["a"])((function(){if(null!==e.minYear&&null!==e.maxYear){var t=Math.min(e.minYear,e.maxYear),a=Math.max(e.minYear,e.maxYear);return Math.abs(a-t)+1}return 0}));return{duration:t}}},ua=ca,da=Object(ae["a"])(ua,sa,la,!1,null,null,null),pa=da.exports,fa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"statuskey",expression:"'statuskey'"}],staticClass:"px-1 mx-2 ext-secondary position-absolute",attrs:{"v-once":!0}},[a("div",[a("b-icon-key",{staticClass:"mr-1"}),e._v("Key")],1),a("b-collapse",{attrs:{id:"statuskey"}},[a("b-list-group",[a("b-list-group-item",{staticClass:"status status-valid"},[e._v("valid")]),a("b-list-group-item",{staticClass:"status status-uncertain"},[e._v("uncertain")]),a("b-list-group-item",{staticClass:"status status-needsmore"},[e._v("ambiguous")]),a("b-list-group-item",{staticClass:"status status-invalid"},[e._v("contradicted")]),a("b-list-group-item",{staticClass:"status status-unknown"},[e._v("lacks dates")])],1)],1)],1)},ba=[],ma=(a("97fe"),{}),ga=Object(ae["a"])(ma,fa,ba,!1,null,"daf5a9c4",null),ha=ga.exports,va={components:{NodeIconLink:Ve,YearRangeDisplay:pa,StatusKey:ha},props:{contextID:{type:String,required:!1,default:""}},setup:function(e){var t=Object(n["c"])("store"),a=function(e,a){if(e&&"row"===a){var r=t.getters.classByID(e.sourceID),n=t.getters.classByID(e.targetID);return W(r,n,e.stratRelationship,e.tempRelationship)}},r=function(e){var a=[],r=t.getters.nodeByID(e);if(!r)return a;var n=[].concat(t.getters.edgesBySource(e)).concat(t.getters.edgesByTarget(e)),i=new Map;return n.forEach((function(e){[e.data.source,e.data.target].forEach((function(e){if(!i.has(e)){var a=t.getters.ancestorsOfID(e).map((function(e){return e.data.id})).concat(e);i.set(e,a)}}))})),n.forEach((function(t){var r=new Set(i.get(t.data.source)),n=new Set(i.get(t.data.target));r.forEach((function(e){n.has(e)&&(r.delete(e),n.delete(e))})),r.forEach((function(r){n.forEach((function(n){r!==e&&n!==e||a.push({sourceID:r,targetID:n,edgeType:t.data.type})}))}))})),a},i=Object(n["a"])((function(){var a=r(e.contextID);return a.map((function(e){var a=t.getters.derivedNodeDates(e.sourceID),r=t.getters.derivedNodeDates(e.targetID);return{sourceID:e.sourceID,targetID:e.targetID,sourceDates:a,targetDates:r,stratRelationship:e.edgeType,tempRelationship:X(a,r)}}))})),o=[{key:"sourceLabel",label:"source",sortable:!1},{key:"sourceDates",label:"years (duration)",sortable:!1},{key:"stratRelationship",label:"stratigraphic",sortable:!1},{key:"tempRelationship",label:"temporal",sortable:!1},{key:"targetLabel",label:"target",sortable:!1},{key:"targetDates",label:"years (duration)",sortable:!1}];return{store:t,rowClass:a,tableFields:o,tableData:i}}},ya=va,Oa=(a("1abf"),Object(ae["a"])(ya,ia,oa,!1,null,"359237aa",null)),xa=Oa.exports,Ca={name:"ItemEditor",components:{ItemTable:Xe,ItemLookup:at,ItemLookup2:lt,Stratigraphy:mt,ConnectedElements:xa,DatingYearRangeCE:Pt,SciDating:$t,ItemLabel:Zt,ItemContains:na},props:{selectedID:{type:String,required:!1,default:""},itemClass:{type:String,required:!1,default:y.PHASE,validator:function(e){return[].concat(Object(p["a"])(Object.values(y)),Object(p["a"])(Object.values(O))).includes(e)}}},setup:function(e){var t=Object(n["c"])("store"),a=Object(n["h"])(null),r=Object(n["a"])((function(){return null===a.value||""===a.value})),i=Object(n["a"])((function(){switch(e.itemClass){case y.PHASE:return["sitecode","label","description","contains","yearrange","redolayout","period","temporal"];case y.GROUP:return["sitecode","label","type","parent","contains","description","redolayout","cud","period","temporal"];case y.SUBGROUP:return["sitecode","label","type","parent","contains","description","redolayout","cud","period","temporal"];case y.CONTEXT:return["sitecode","label","type","parent","contains","description","cud","period","temporal","connectedElements"];case y.DATING:return["sitecode","label","type","parent","description","scidating","included","association","period"];case y.PERIOD:return["label","uri","description","contains","yearrange"];case O.EDGE:return["stratigraphy"];default:return[]}})),o=Object(n["a"])((function(){return t.getters.periodOptions})),s=Object(n["a"])((function(){return t.getters.phaseOptions})),l=Object(n["a"])((function(){switch(e.itemClass){case y.GROUP:return t.getters.phaseOptionsGrouped;case y.SUBGROUP:return t.getters.groupOptionsGrouped;case y.CONTEXT:return t.getters.contextParentOptions;case y.DATING:return t.getters.contextOptionsGrouped;default:return[]}})),c=Object(n["a"])((function(){switch(e.itemClass){case y.PHASE:return t.getters.phaseTypeOptions;case y.GROUP:return t.getters.groupTypeOptions;case y.SUBGROUP:return t.getters.groupTypeOptions;case y.CONTEXT:return t.getters.contextTypeOptions;case y.DATING:return t.getters.datingTypeOptions;default:return[]}})),u=function(e){var r;a.value=J()({},e),t.dispatch("setSelectedID",null===(r=Object(n["j"])(a).data)||void 0===r?void 0:r.id)},d=function(e){var t;a.value&&((null===(t=a.value.data)||void 0===t?void 0:t.id)==e&&(a.value=null))},p=function(){return k()},f=function(){return k()},b=function(){return k()},m=function(){a.value&&je.$emit("diagram-redo-compound-layout",Object(n["j"])(a))},g=function(e){a.value&&a.value.data.parent!=e&&(a.value.data.parent=e,je.$emit("node-parent-changed",Object(n["j"])(a)),k())},h=function(e){a.value&&(a.value.data.siteCode=e,k())},v=function(e){a.value&&(a.value.data.type=e,k())},x=function(e){a.value&&(a.value.data.dating=e,k())},C=function(e){a.value&&(a.value.data.included=e,k())},D=function(e){a.value&&(a.value.data.association=e,k())},w=function(e){a.value&&(a.value.data.cud=e,k())},I=function(e){a.value&&(a.value.data.period=e,k())},k=function(){t.dispatch("updateNode",Object(n["j"])(a))};return{store:t,selectedItem:a,disabled:r,fields:i,parentLookupOptions:l,typeLookupOptions:c,phaseLookupOptions:s,periodLookupOptions:o,itemSelected:u,itemDeleted:d,siteCodeChanged:h,labelChanged:p,uriChanged:f,descriptionChanged:b,redoCompoundNodeLayout:m,parentChanged:g,typeChanged:v,datingChanged:x,includeChanged:C,associationChanged:D,cudChanged:w,periodChanged:I,itemChanged:k}}},Da=Ca,wa=(a("db41"),Object(ae["a"])(Da,Re,Be,!1,null,"0393dc29",null)),Ia=wa.exports,ka=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{staticClass:"p-2",attrs:{fluid:""}},[a("b-row",{attrs:{"align-h":"between"}},[a("b-col",[a("b-button",{staticClass:"text-left shadow",attrs:{pill:"",size:"sm",disabled:e.isBusy,variant:"primary",title:"Redo validation",alt:"Redo validation"},on:{click:function(t){return t.stopPropagation(),e.refresh()}}},[a("b-icon-arrow-clockwise"),e._v("Redo validation")],1)],1),a("b-col",[a("b-form-group",{staticClass:"mb-2",attrs:{label:"Filter","label-for":"filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"},scopedSlots:e._u([{key:"label",fn:function(){return[a("b-icon-search")]},proxy:!0}])},[a("b-form-input",{staticClass:"shadow-sm",attrs:{size:"sm",id:"filter-input",type:"search",autocomplete:"off",placeholder:"filter validation records"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),a("div",{staticClass:"text-secondary text-right"},[e._v("Showing "+e._s(e.filterCount)+" of "+e._s(e.tests.length))])],1)],1)],1),a("b-row",[a("b-col",[a("b-table",{staticClass:"overflow-auto shadow-sm mb-2",staticStyle:{height:"600px"},attrs:{"show-empty":"","sort-icon-left":"",outlined:"",small:"",id:"datatable",busy:e.isBusy,"no-border-collapse":!0,"sticky-header":"600px","select-mode":"single","primary-key":"id",items:e.tests,fields:e.fields,filter:e.filter,"tbody-tr-class":e.tableRowClass},on:{filtered:e.onFiltered},scopedSlots:e._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-danger my-2"},[a("b-spinner",{staticClass:"align-middle"}),a("strong",[e._v("Validating...")])],1)]},proxy:!0},{key:"cell(actions)",fn:function(t){return[t.item.failed.value>0?a("b-icon-caret-down",{attrs:{title:"show details",size:"sm"},on:{click:t.toggleDetails}}):e._e()]}},{key:"cell(result)",fn:function(e){return[a("TickOrCross",{attrs:{value:!e.item.failed.value&&(!!e.item.tested.value||null)}})]}},{key:"row-details",fn:function(t){return[a("b-list-group",[t.item.failed.value>0?a("b-list-group-item",{attrs:{variant:t.item.optional?"warning":"danger"}},[a("strong",[a("span",[e._v(e._s(t.item.failed.value+" failed"))]),t.item.failed.value>e.maxResults?a("span",{staticClass:"ml-1"},[e._v(e._s("(showing first "+e.maxResults+" only)"))]):e._e(),a("span",[e._v(":"),a("br")])]),e._l(t.item.failedIDs.value.slice(0,e.maxResults),(function(e){return a("NodeIconLink",{key:e,staticClass:"mr-3",attrs:{nodeID:e}})}))],2):e._e()],1)]}}])})],1)],1)],1)},Ea=[],ja=a("262e"),Sa=a("2caf"),_a=a("d4ec"),Na=a("bee2"),Ta=(a("00b4"),a("820e"),{components:{NodeIconLink:Ve,TickOrCross:ne},setup:function(){var e=Object(n["c"])("store"),t=Object(n["h"])(!1),a=Object(n["h"])(""),r=function(e,t){return L.value=t},i=Object(n["h"])("test"),o=Object(n["h"])(!1),s=20,l=[{key:"result",label:"result",sortByFormatted:!0,formatter:function(e,t,a){return!Object(n["j"])(a.failed)&&(!!Object(n["j"])(a.tested)||null)},sortable:!0,class:"text-center"},{key:"testName",label:"description",formatter:function(e,t,a){return a.title},sortable:!0},{key:"tested",label:"tested",sortByFormatted:!0,formatter:function(e,t,a){return Object(n["j"])(a.tested)},sortable:!0,class:"text-right"},{key:"passed",label:"passed",sortByFormatted:!0,formatter:function(e,t,a){return Object(n["j"])(a.passed)},sortable:!0,class:"text-right"},{key:"failed",label:"failed",sortByFormatted:!0,formatter:function(e,t,a){return Object(n["j"])(a.failed)},sortable:!0,class:"text-right"},{key:"actions",label:""}],c=function(e,t){return e&&"row"===t?0==Object(n["j"])(e.tested)?"table-light":Object(n["j"])(e.failed)>0?e.optional?"table-warning":"table-danger":"table-success":"table-light"},u=function(t){return e.dispatch("setSelectedID",t)},d=function(t){var a;return e.getters.descendantsOfID(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.id).some((function(e){var t;return(null===(t=e.data)||void 0===t?void 0:t.class)==y.CONTEXT}))},p=function(t){return e.getters.ancestorsOfNode(t).some((function(e){return e.data.class==y.PHASE}))},f=function(t){return e.getters.ancestorsOfNode(t).some((function(e){return[y.GROUP,y.SUBGROUP].includes(e.data.class)}))},m=function(e){var t;return!(null===e||void 0===e||null===(t=e.data)||void 0===t||!t.period)},g=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"New test",r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(_a["a"])(this,e),this.id=a,this.title=a,this.optional=r,this.isBusy=Object(n["h"])(!1),this.tested=Object(n["h"])(0),this.failedIDs=Object(n["i"])([]),this.failed=Object(n["a"])((function(){return Object(n["j"])(t.failedIDs).length})),this.passed=Object(n["a"])((function(){return Object(n["j"])(t.tested)-Object(n["j"])(t.failed)}))}return Object(Na["a"])(e,[{key:"rerun",value:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isBusy.value=!0,this.tested.value=0,this.failedIDs.value.length=0,e.next=5,this.test();case 5:t=e.sent,this.tested.value=t.tested||0,this.failedIDs.value=t.failedIDs||[],this.isBusy.value=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"test",value:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",{tested:0,failedIDs:[]});case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),h=function(t){Object(ja["a"])(r,t);var a=Object(Sa["a"])(r);function r(){return Object(_a["a"])(this,r),a.call(this,"Phases MUST contain at least one context",!1)}return Object(Na["a"])(r,[{key:"test",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={tested:0,failedIDs:[]},e.getters.phases.forEach(function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d(t)||a.failedIDs.push(t.data.id),a.tested++;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}]),r}(g),O=function(t){Object(ja["a"])(r,t);var a=Object(Sa["a"])(r);function r(){return Object(_a["a"])(this,r),a.call(this,"Phases SHOULD define a date range",!0)}return Object(Na["a"])(r,[{key:"test",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={tested:0,failedIDs:[]},e.getters.phases.forEach(function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.data.dating.minYear&&t.data.dating.maxYear||a.failedIDs.push(t.data.id),a.tested++;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}]),r}(g),x=function(t){Object(ja["a"])(r,t);var a=Object(Sa["a"])(r);function r(){return Object(_a["a"])(this,r),a.call(this,"Phases SHOULD be allocated to a period",!0)}return Object(Na["a"])(r,[{key:"test",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={tested:0,failedIDs:[]},e.getters.phases.forEach(function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:m(t)||a.failedIDs.push(t.data.id),a.tested++;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}]),r}(g),C=function(t){Object(ja["a"])(r,t);var a=Object(Sa["a"])(r);function r(){return Object(_a["a"])(this,r),a.call(this,"Groups MUST contain at least one context",!1)}return Object(Na["a"])(r,[{key:"test",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={tested:0,failedIDs:[]},e.getters.groups.forEach(function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d(t)||a.failedIDs.push(t.data.id),a.tested++;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}]),r}(g),D=function(t){Object(ja["a"])(r,t);var a=Object(Sa["a"])(r);function r(){return Object(_a["a"])(this,r),a.call(this,"Groups MUST be allocated to a phase",!1)}return Object(Na["a"])(r,[{key:"test",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={tested:0,failedIDs:[]},e.getters.groups.forEach(function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:p(t)||a.failedIDs.push(t.data.id),a.tested++;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}]),r}(g),w=function(t){Object(ja["a"])(r,t);var a=Object(Sa["a"])(r);function r(){return Object(_a["a"])(this,r),a.call(this,"Groups SHOULD be allocated to a period",!0)}return Object(Na["a"])(r,[{key:"test",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={tested:0,failedIDs:[]},e.getters.groups.forEach(function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:m(t)||a.failedIDs.push(t.data.id),a.tested++;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}]),r}(g),I=function(t){Object(ja["a"])(r,t);var a=Object(Sa["a"])(r);function r(){return Object(_a["a"])(this,r),a.call(this,"Subgroups MUST contain at least one context",!1)}return Object(Na["a"])(r,[{key:"test",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={tested:0,failedIDs:[]},e.getters.subgroups.forEach(function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d(t)||a.failedIDs.push(t.data.id),a.tested++;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}]),r}(g),k=function(t){Object(ja["a"])(r,t);var a=Object(Sa["a"])(r);function r(){return Object(_a["a"])(this,r),a.call(this,"Subgroups MUST be allocated to a group",!1)}return Object(Na["a"])(r,[{key:"test",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={tested:0,failedIDs:[]},e.getters.subgroups.forEach(function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(r){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=e.getters.nodeByID(r.data.parent),(null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.class)!=y.GROUP&&a.failedIDs.push(r.data.id),a.tested++;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}]),r}(g),E=function(t){Object(ja["a"])(r,t);var a=Object(Sa["a"])(r);function r(){return Object(_a["a"])(this,r),a.call(this,"Subgroups MUST be allocated to a phase",!1)}return Object(Na["a"])(r,[{key:"test",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={tested:0,failedIDs:[]},e.getters.subgroups.forEach(function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:p(t)||a.failedIDs.push(t.data.id),a.tested++;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}]),r}(g),j=function(t){Object(ja["a"])(r,t);var a=Object(Sa["a"])(r);function r(){return Object(_a["a"])(this,r),a.call(this,"Subgroups SHOULD be allocated to a period",!0)}return Object(Na["a"])(r,[{key:"test",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={tested:0,failedIDs:[]},e.getters.subgroups.forEach(function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:m(t)||a.failedIDs.push(t.data.id),a.tested++;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}]),r}(g),S=function(t){Object(ja["a"])(r,t);var a=Object(Sa["a"])(r);function r(){return Object(_a["a"])(this,r),a.call(this,"Contexts MUST be allocated to a phase",!1)}return Object(Na["a"])(r,[{key:"test",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={tested:0,failedIDs:[]},e.getters.contexts.forEach(function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:p(t)||a.failedIDs.push(t.data.id),a.tested++;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}]),r}(g),_=function(t){Object(ja["a"])(r,t);var a=Object(Sa["a"])(r);function r(){return Object(_a["a"])(this,r),a.call(this,"Contexts SHOULD be allocated to a period",!0)}return Object(Na["a"])(r,[{key:"test",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={tested:0,failedIDs:[]},e.getters.contexts.forEach(function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:m(t)||a.failedIDs.push(t.data.id),a.tested++;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}]),r}(g),T=function(t){Object(ja["a"])(r,t);var a=Object(Sa["a"])(r);function r(){return Object(_a["a"])(this,r),a.call(this,"Contexts SHOULD be allocated to a group (or subgroup)",!0)}return Object(Na["a"])(r,[{key:"test",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={tested:0,failedIDs:[]},e.getters.contexts.forEach(function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:f(t)||a.failedIDs.push(t.data.id),a.tested++;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}]),r}(g),Y=function(t){Object(ja["a"])(r,t);var a=Object(Sa["a"])(r);function r(){return Object(_a["a"])(this,r),a.call(this,"Contexts SHOULD have a type",!0)}return Object(Na["a"])(r,[{key:"test",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={tested:0,failedIDs:[]},e.getters.contexts.forEach(function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:""==((null===(r=t.data)||void 0===r?void 0:r.type)||"").trim()&&a.failedIDs.push(t.data.id),a.tested++;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}]),r}(g),P=function(t){Object(ja["a"])(r,t);var a=Object(Sa["a"])(r);function r(){return Object(_a["a"])(this,r),a.call(this,"Context positions in diagram MUST reflect stratigraphy",!1)}return Object(Na["a"])(r,[{key:"test",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={tested:0,failedIDs:[]},e.getters.edges.filter((function(e){return e.data.type==v.ABOVE})).forEach((function(t){var r=e.getters.nodeByID(t.data.source),n=e.getters.nodeByID(t.data.target);N(r)&&N(n)&&(r.position.y<n.position.y||a.failedIDs.push(t.data.id),a.tested++)})),t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}]),r}(g),R=function(t){Object(ja["a"])(r,t);var a=Object(Sa["a"])(r);function r(){return Object(_a["a"])(this,r),a.call(this,"Periods SHOULD define a date range",!0)}return Object(Na["a"])(r,[{key:"test",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={tested:0,failedIDs:[]},e.getters.periods.forEach(function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){var r,n,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=(null===(r=t.data)||void 0===r||null===(n=r.dating)||void 0===n?void 0:n.minYear)&&null!=(null===(i=t.data)||void 0===i||null===(o=i.dating)||void 0===o?void 0:o.maxYear)||a.failedIDs.push(t.data.id),a.tested++;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}]),r}(g),B=[new h,new O,new x,new C,new D,new w,new I,new k,new E,new j,new S,new _,new T,new Y,new P,new R],G=Object(n["a"])((function(){return B.length})),L=Object(n["h"])(B.length);Object(n["k"])(G,(function(e){return L.value=e}));var U=function(){t.value=!0,a.value="",Promise.allSettled(B.map(function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.rerun());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(){return t.value=!1}))};return{isBusy:t,filter:a,maxResults:s,rowCount:G,filterCount:L,onFiltered:r,sortBy:i,sortDesc:o,fields:l,tests:B,tableRowClass:c,refresh:U,setSelectedID:u,store:e}}}),Ya=Ta,Pa=(a("59b5"),Object(ae["a"])(Ya,ka,Ea,!1,null,"5a76da37",null)),Ra=Pa.exports,Ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{staticClass:"p-2",attrs:{fluid:""}},[a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{label:"Site code(s)","label-for":"siteCodes","label-size":"md"}},[a("b-form-textarea",{staticClass:"shadow-sm",staticStyle:{resize:"vertical"},attrs:{text:"",resize:"",size:"sm",id:e.siteCodes,disabled:!0,placeholder:"site codes present in data",value:e.siteCodes,type:"text",variant:"primary"}})],1),a("b-form-group",{attrs:{label:"Title","label-for":"title"}},[a("b-form-input",{staticClass:"shadow-sm",attrs:{size:"sm",placeholder:"(title)",type:"text",name:"title"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),a("b-form-group",{attrs:{label:"Description","label-for":"description"}},[a("b-form-textarea",{staticClass:"shadow-sm",staticStyle:{resize:"vertical"},attrs:{size:"sm",placeholder:"(description)",rows:"3","max-rows":"6",type:"text",name:"description"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),a("b-form-group",{attrs:{label:"Creator","label-for":"creator"}},[a("b-form-input",{staticClass:"shadow-sm",attrs:{size:"sm",placeholder:"(creator)",type:"text",name:"creator"},model:{value:e.creator,callback:function(t){e.creator=t},expression:"creator"}})],1),a("b-form-group",{attrs:{label:"Contact email address","label-for":"contact"}},[a("b-form-input",{staticClass:"shadow-sm",attrs:{size:"sm",placeholder:"(contact email address)",type:"email",name:"contact"},model:{value:e.contact,callback:function(t){e.contact=t},expression:"contact"}})],1),a("b-form-group",{attrs:{label:"License URL","label-for":"license"}},[a("b-form-input",{staticClass:"shadow-sm",attrs:{size:"sm",placeholder:"(license URL)",type:"url",name:"license"},model:{value:e.license,callback:function(t){e.license=t},expression:"license"}})],1),a("b-form-group",{attrs:{label:"Data version","label-for":"version"}},[a("b-form-input",{staticClass:"shadow-sm",attrs:{size:"sm",placeholder:"(version)",type:"text",name:"version"},model:{value:e.version,callback:function(t){e.version=t},expression:"version"}})],1)],1)],1)],1)},Ga=[],La={name:"MetaEditor",components:{},setup:function(){var e=Object(n["c"])("store"),t=Object(n["a"])((function(){var t=e.getters.nodes.map((function(e){return e.data.siteCode}));return Object(p["a"])(new Set(t)).filter((function(e){return e})).join(", ")})),a=Object(n["a"])({get:function(){return e.state.about.title},set:function(t){e.commit("SET_ABOUT",{title:t})}}),r=Object(n["a"])({get:function(){return e.state.about.description},set:function(t){e.commit("SET_ABOUT",{description:t})}}),i=Object(n["a"])({get:function(){return e.state.about.creator},set:function(t){e.commit("SET_ABOUT",{creator:t})}}),o=Object(n["a"])({get:function(){return e.state.about.contact},set:function(t){e.commit("SET_ABOUT",{contact:t})}}),s=Object(n["a"])({get:function(){return e.state.about.license},set:function(t){e.commit("SET_ABOUT",{license:t})}}),l=Object(n["a"])({get:function(){return e.state.about.version},set:function(t){e.commit("SET_ABOUT",{version:t})}});return{siteCodes:t,store:e,title:a,description:r,creator:i,contact:o,license:s,version:l}}},Ua=La,Aa=Object(ae["a"])(Ua,Ba,Ga,!1,null,null,null),Fa=Aa.exports,za=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{staticClass:"p-2 m-0",attrs:{fluid:""}},[a("b-row",{attrs:{"no-gutters":""}},[a("b-col",[a("b-dropdown",{ref:"nodeClassOptionsDropdown",staticClass:"m-0 p-0 border",attrs:{block:"",size:"sm",title:"Select elements to search for",alt:"Select elements to search for","menu-class":"w-100",variant:"light"},scopedSlots:e._u([{key:"button-content",fn:function(){return[e._v(e._s(e.searchElementHeader))]},proxy:!0},{key:"default",fn:function(){return[a("b-form-checkbox",{staticClass:"ml-2",attrs:{size:"sm"},on:{change:e.toggleAllNodeClasses},model:{value:e.allNodeClassesSelected,callback:function(t){e.allNodeClassesSelected=t},expression:"allNodeClassesSelected"}},[a("span",[e._v("Toggle all")])]),a("b-form-checkbox-group",{staticClass:"p-0 ml-4",attrs:{stacked:"",size:"sm",name:"nodeClassSelection",options:e.nodeClassOptions},on:{change:e.clearResults},model:{value:e.selectedNodeClasses,callback:function(t){e.selectedNodeClasses=t},expression:"selectedNodeClasses"}})]},proxy:!0}])})],1),a("b-col",[a("b-dropdown",{ref:"nodeParentDropdown",staticClass:"mx-1 p-0 border",attrs:{block:"",size:"sm",title:"Select elements to search within",alt:"Select elements to search within","menu-class":"w-100",variant:"light"},scopedSlots:e._u([{key:"button-content",fn:function(){return[e._v(e._s(e.searchWithinHeader))]},proxy:!0},{key:"default",fn:function(){return[a("b-form-select",{staticClass:"p-0 m-0",attrs:{size:"sm","select-size":8,options:e.nodeParentOptions},on:{change:e.nodeParentSelected},model:{value:e.selectedNodeParent,callback:function(t){e.selectedNodeParent=t},expression:"selectedNodeParent"}})]},proxy:!0}])})],1),a("b-col",[a("b-dropdown",{ref:"nodePeriodDropdown",staticClass:"mx-1 p-0 border",attrs:{block:"",size:"sm",title:"Select period to search for",alt:"Select period to search for","menu-class":"w-100",variant:"light"},scopedSlots:e._u([{key:"button-content",fn:function(){return[e._v(e._s(e.searchPeriodHeader))]},proxy:!0},{key:"default",fn:function(){return[a("b-form-select",{staticClass:"p-0 m-0",attrs:{size:"sm","select-size":8,options:e.nodePeriodOptions},on:{change:e.nodePeriodSelected},model:{value:e.selectedNodePeriod,callback:function(t){e.selectedNodePeriod=t},expression:"selectedNodePeriod"}})]},proxy:!0}])})],1)],1),a("b-row",[a("b-col",[a("b-button-group",{staticClass:"my-1"},[a("b-button",{staticClass:"m-1",attrs:{pill:"",size:"sm",variant:"primary",type:"submit",title:"Search",alt:"Search",disabled:e.isSearchDisabled},on:{click:e.onSubmit}},[a("b-icon-search",{staticClass:"mr-2"}),e._v("Search")],1),a("b-button",{staticClass:"m-1",attrs:{pill:"",size:"sm",variant:"primary",type:"reset",title:"Copy results to clipboard",alt:"Copy results to clipboard",disabled:e.isCopyDisabled},on:{click:e.copyToClipboard}},[a("b-icon-clipboard-plus",{staticClass:"mr-2"}),e._v("Copy")],1),a("b-button",{staticClass:"m-1",attrs:{pill:"",size:"sm",variant:"primary",type:"reset",title:"Clear all",alt:"Clear all",disabled:e.isResetDisabled},on:{click:e.onReset}},[a("b-icon-trash",{staticClass:"mr-2"}),e._v("Clear")],1)],1)],1),a("b-col",[a("b-form-group",{staticClass:"m-1",attrs:{"label-cols-sm":"3","label-align-sm":"right","label-size":"sm"},scopedSlots:e._u([{key:"label",fn:function(){return[a("b-icon-funnel")]},proxy:!0}])},[a("b-form-input",{staticClass:"shadow-sm",attrs:{size:"sm",id:"filter-results",type:"search",autocomplete:"off",placeholder:"filter results"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),a("div",{staticClass:"text-secondary text-right"},[e._v("Showing "+e._s(e.filterCount)+" of "+e._s(e.searchResults.length))])],1)],1)],1),a("b-table",{staticClass:"overflow-auto shadow-sm",staticStyle:{height:"600px"},attrs:{"show-empty":"",small:"",striped:"",hover:"",outlined:"","sort-icon-left":"",id:"datatable-searchresults","no-border-collapse":!0,"sticky-header":!0,filter:e.filter,"filter-ignored-fields":["nodeID","periodID","parentID"],"filter-included-fields":["nodeLabel","nodeType","description","periodLabel","parentLabel"],"primary-key":"data.id",items:e.dataForDisplay,fields:e.fields,"per-page":e.perPage,"current-page":e.currentPage,"no-select-on-click":!0},on:{filtered:e.onFiltered,"row-selected":e.rowSelected},scopedSlots:e._u([{key:"cell(nodeLabel)",fn:function(e){return[a("NodeIconLink",{attrs:{nodeID:e.item.nodeID}})]}},{key:"cell(nodeType)",fn:function(t){return[e._v(e._s(e.truncate(t.item.nodeType,30)))]}},{key:"cell(parentLabel)",fn:function(e){return[a("NodeIconLink",{attrs:{nodeID:e.item.parentID}})]}},{key:"cell(periodLabel)",fn:function(e){return[a("NodeIconLink",{attrs:{nodeID:e.item.periodID}})]}},{key:"cell(derivedDates)",fn:function(e){return[a("YearRangeDisplay",{attrs:{minYear:e.item.minYear,maxYear:e.item.maxYear,showDuration:!0}})]}}])}),a("b-row",[a("b-col",[a("b-pagination",{attrs:{size:"sm","total-rows":e.filterCount,"per-page":e.perPage,"aria-controls":"my-table","first-number":!0,"last-number":!0},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)],1)},Ma=[],Va={components:{NodeIconLink:Ve,YearRangeDisplay:pa},props:{},setup:function(){var e=Object(n["c"])("store"),t=Object(n["h"])(!1),a=Object(n["h"])(null),r=Object(n["h"])(null),i=25,o=Object(n["h"])(1),s=Object(n["a"])((function(){return O.value.length})),l=Object(n["h"])(""),c=Object(n["h"])(0),u=function(e,t){return c.value=t},d=[y.PHASE,y.GROUP,y.SUBGROUP,y.CONTEXT,y.DATING],p=Object(n["h"])([]),f=Object(n["h"])(!1),m=function(e){return p.value=e?d.slice():[]};Object(n["k"])(p,(function(e){0===e.length?f.value=!1:e.length===d.length?f.value=!0:f.value=!1}));var h=Object(n["h"])(""),v=Object(n["h"])(""),O=Object(n["h"])([]),x=Object(n["a"])((function(){return O.value.map((function(t){var a,r,n,i,o,s,l=null;return l=T(t)?e.getters.enteredDatesForNode(t):e.getters.derivedNodeDates(t.data.id),{nodeID:(null===(a=t.data)||void 0===a?void 0:a.id)||"",nodeClass:(null===(r=t.data)||void 0===r?void 0:r.class)||"",nodeLabel:e.getters.labelByID(t.data.id,!1)||"",nodeType:(null===(n=t.data)||void 0===n?void 0:n.type)||"",description:(null===(i=t.data)||void 0===i?void 0:i.description)||"",periodID:(null===(o=t.data)||void 0===o?void 0:o.period)||"",periodLabel:e.getters.labelByID(t.data.period,!1)||"",parentID:(null===(s=t.data)||void 0===s?void 0:s.parent)||"",parentLabel:e.getters.labelByID(t.data.parent,!1)||"",minYear:l.minYear,maxYear:l.maxYear}}))})),C=function(){var e=x.value.map((function(e){return{id:e.nodeLabel,type:e.nodeType,description:e.description,period:e.periodLabel,within:e.parentLabel,minYear:e.minYear,maxYear:e.maxYear}})),t=g.a.unparse(JSON.stringify(e),{delimiter:"\t"});navigator.clipboard.writeText(t)},D=Object(n["a"])((function(){return"Elements: ".concat(Object(n["j"])(p).length>0?Object(n["j"])(p).join(", "):"(none)")})),I=Object(n["a"])((function(){var t="(any)";return h.value&&(t=e.getters.labelByID(Object(n["j"])(h),!0)),"Within: ".concat(t)})),k=Object(n["a"])((function(){var t="(any)";return v.value&&(t=e.getters.labelByID(Object(n["j"])(v),!1)),"Period: ".concat(t)})),E=Object(n["a"])((function(){return[{value:"",text:"(any)",selected:!0}].concat(e.getters.phaseOptionsGrouped).concat(e.getters.groupOptionsGrouped).concat(e.getters.subgroupOptionsGrouped)})),j=Object(n["a"])((function(){return[{value:"",text:"(any)",selected:!0}].concat(e.getters.periodOptions)})),S=function(){a.value.hide(),N()},_=function(){r.value.hide(),N()},N=function(){O.value=[],l.value="",c.value=0},Y=function(){var a=Object(b["a"])(regeneratorRuntime.mark((function a(r){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.preventDefault(),t.value=!0,N(),i=[],i=h.value?e.getters.descendantsOfID(h.value):e.getters.nodes,O.value=i.filter((function(e){return!v.value||e.data.period==Object(n["j"])(v)})).filter((function(e){return-1!==Object(n["j"])(p).indexOf(e.data.class)})),c.value=O.value.length,t.value=!1;case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),P=function(e){e.preventDefault(),p.value=[],h.value="",v.value="",N(),t.value=!1},R=Object(n["a"])((function(){return 0===p.value.length})),B=Object(n["a"])((function(){return 0===O.value.length})),G=Object(n["a"])((function(){return""==h.value&&0==p.value.length})),L=function(){},U=Object(n["a"])((function(){return[{key:"nodeLabel",label:"identifier",sortable:!0},{key:"periodLabel",label:"period",sortable:!0},{key:"nodeType",label:"type",sortable:!0},{key:"derivedDates",label:"years (duration)",sortable:!1},{key:"parentLabel",label:"within",sortable:!0}]}));return{store:e,perPage:i,currentPage:o,rowCount:s,filter:l,filterCount:c,onFiltered:u,truncate:w,NodeClass:y,searchElementHeader:D,searchWithinHeader:I,searchPeriodHeader:k,nodeClassOptions:d,toggleAllNodeClasses:m,nodeParentOptions:E,nodePeriodOptions:j,nodeParentSelected:S,nodePeriodSelected:_,selectedNodeClasses:p,allNodeClassesSelected:f,selectedNodeParent:h,selectedNodePeriod:v,onSubmit:Y,onReset:P,isSearchDisabled:R,isResetDisabled:G,isCopyDisabled:B,searchResults:O,clearResults:N,rowSelected:L,fields:U,dataForDisplay:x,nodeParentDropdown:a,nodePeriodDropdown:r,copyToClipboard:C}}},Ha=Va,$a=(a("51a0"),Object(ae["a"])(Ha,za,Ma,!1,null,"25329fec",null)),qa=$a.exports,Xa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{staticClass:"p-2",attrs:{fluid:""}},[a("b-row",{attrs:{"align-h":"between"}},[a("b-col",{staticStyle:{"text-align":"left"}},[a("b-input-group",{attrs:{prepend:"Phase",size:"sm"}},[a("b-form-select",{staticClass:"shadow-sm",attrs:{plain:!0,name:"phase-selector",options1:e.phaseLookupOptions,placeholder:"select phase"},model:{value:e.selectedPhaseID,callback:function(t){e.selectedPhaseID=t},expression:"selectedPhaseID"}},e._l(e.phaseLookupOptions,(function(t){return a("b-form-select-option",{key:t.value,attrs:{value:t.value}},[a("span",[e._v(e._s(t.text))])])})),1)],1)],1),a("b-col",[a("b-input-group",{scopedSlots:e._u([{key:"prepend",fn:function(){return[a("b-icon-search",{staticClass:"m-2",attrs:{height:"10"}})]},proxy:!0}])},[a("b-form-input",{staticClass:"shadow-sm",attrs:{size:"sm",id:"filter-input",disabled:!e.selectedPhaseID,type:"search",autocomplete:"off",placeholder:"filter results"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)],1)],1),a("b-row",[a("b-col",[a("PhaseDTR",{attrs:{phaseID:e.selectedPhaseID,filter:e.filter}})],1)],1),a("b-row",[a("b-col",[a("hr")])],1),a("b-row",[a("b-col",[a("PhaseDSR",{attrs:{phaseID:e.selectedPhaseID,filter:e.filter}})],1)],1)],1)},Wa=[],Ka=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{staticClass:"p-0 m-0",attrs:{fluid:""}},[a("b-row",[a("b-col",[a("div",{staticClass:"p-2 text-center"},[e._v("Derived temporal relationships between elements within phase "+e._s(e.selectedPhaseLabel))])])],1),a("b-row",[a("b-col",[a("b-table",{staticClass:"shadow-sm",staticStyle:{height:"250px"},attrs:{"sort-icon-left":"",outlined:"",small:"","show-empty":"",id:"datatable-temporal",busy:e.isBusy,"no-border-collapse":!0,"sticky-header":"250px","select-mode":"single","filter-ignored-fields":["source","target"],"filter-included-fields":["sourceLabel","relationship","targetLabel"],filter:e.filter,"per-page":e.perPage,"current-page":e.currentPage,items:e.items,fields:e.fields},on:{filtered:e.onFiltered},scopedSlots:e._u([{key:"thead-top",fn:function(){return[a("b-tr",[a("b-th",{staticClass:"text-center",attrs:{colspan:"2"}},[e._v("source")]),a("b-th",{staticClass:"text-center border-left border-right"},[e._v("relationship")]),a("b-th",{staticClass:"text-center",attrs:{colspan:"2"}},[e._v("target")])],1)]},proxy:!0},{key:"cell(sourceLabel)",fn:function(e){return[a("NodeIconLink",{attrs:{nodeID:e.item.source}})]}},{key:"cell(targetLabel)",fn:function(e){return[a("NodeIconLink",{attrs:{nodeID:e.item.target}})]}},{key:"cell(sourceDates)",fn:function(e){return[a("YearRangeDisplay",{attrs:{minYear:e.item.sourceDates.minYear,maxYear:e.item.sourceDates.maxYear,showDuration:!0}})]}},{key:"cell(targetDates)",fn:function(e){return[a("YearRangeDisplay",{attrs:{minYear:e.item.targetDates.minYear,maxYear:e.item.targetDates.maxYear,showDuration:!0}})]}}])})],1)],1),a("b-row",[a("b-col",[a("b-pagination",{attrs:{size:"sm","total-rows":e.filterCount,"per-page":e.perPage,"aria-controls":"my-table","first-number":!0,"last-number":!0},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1),a("b-col",{staticClass:"text-right"},[e._v("Showing "+e._s(e.filterCount)+" of "+e._s(e.items.length))])],1)],1)},Ja=[],Za={components:{NodeIconLink:Ve,YearRangeDisplay:pa},props:{phaseID:{type:String,required:!1,default:""},filter:{type:String,required:!1,default:""}},setup:function(e){var t=Object(n["c"])("store"),a=Object(n["h"])([]),r=Object(n["h"])(!1),i=25,o=Object(n["h"])(1),s=Object(n["h"])(0),l=function(e,t){s.value=t},c=[{key:"sourceLabel",label:"identifier",sortable:!0,sortByFormatted:!0,formatter:function(e,t,a){return"".concat(a.sourceClass).concat(a.sourceLabel)}},{key:"sourceDates",label:"years (duration)",sortable:!1},{key:"relationship",label:"temporal",sortable:!0},{key:"targetLabel",label:"identifier",sortable:!0,sortByFormatted:!0,formatter:function(e,t,a){return"".concat(a.targetClass).concat(a.targetLabel)}},{key:"targetDates",label:"years (duration)",sortable:!1}],u=Object(n["a"])((function(){return t.getters.labelByID(e.phaseID)})),d=Object(n["a"])((function(){return e.phaseID}));Object(n["k"])(d,function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.value=!0,a.value=[],s.value=0,e.next=5,p(t);case 5:a.value=e.sent,s.value=a.value.length,r.value=!1;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var p=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(a){var r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=[],n=t.getters.nodeByID(a),n){e.next=4;break}return e.abrupt("return",r);case 4:return i=new Map,t.getters.descendantsOfID(a).filter((function(e){return[y.GROUP,y.SUBGROUP,y.CONTEXT].includes(e.data.class)})).forEach((function(e){var a=t.getters.derivedNodeDates(e.data.id);P(a)&&i.set(e.data.id,a)})),i.forEach((function(e,a){var n=t.getters.labelByID(a,!1),o=t.getters.classByID(a);i.forEach((function(i,s){var l=t.getters.classByID(s);a!==s&&r.push({source:a,target:s,sourceClass:o,targetClass:l,sourceLabel:n,targetLabel:t.getters.labelByID(s,!1),sourceDates:e,targetDates:i,relationship:X(e,i)})}))})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{store:t,fields:c,perPage:i,currentPage:o,filterCount:s,onFiltered:l,selectedPhaseLabel:u,items:a,isBusy:r}}},Qa=Za,er=Object(ae["a"])(Qa,Ka,Ja,!1,null,null,null),tr=er.exports,ar=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{staticClass:"p-0 m-0",attrs:{fluid:""}},[a("b-row",[a("b-col",[a("div",{staticClass:"p-2 text-center"},[a("span",[e._v("Derived stratigraphic relationships between elements within phase "+e._s(e.selectedPhaseLabel))]),a("StatusKey")],1)])],1),a("b-row",[a("b-col",[a("b-table",{staticClass:"shadow-sm",staticStyle:{height:"250px"},attrs:{"sort-icon-left":"",outlined:"",small:"","show-empty":"",id:"datatable-stratigraphic",busy:e.isBusy,"no-border-collapse":!0,"sticky-header":"250px","select-mode":"single","filter-ignored-fields":["sourceID","targetID"],"filter-included-fields":["sourceLabel","stratRelationship","tempRelationship","targetLabel"],filter:e.filter,"per-page":e.perPage,"current-page":e.currentPage,items:e.items,fields:e.fields,"tbody-tr-class":e.rowClass},on:{filtered:e.onFiltered},scopedSlots:e._u([{key:"thead-top",fn:function(){return[a("b-tr",[a("b-th",{staticClass:"text-center",attrs:{colspan:"2"}},[e._v("source")]),a("b-th",{staticClass:"text-center border-left border-right",attrs:{colspan:"2"}},[e._v("relationship")]),a("b-th",{staticClass:"text-center",attrs:{colspan:"2"}},[e._v("target")])],1)]},proxy:!0},{key:"cell(sourceLabel)",fn:function(e){return[a("NodeIconLink",{attrs:{nodeID:e.item.sourceID}})]}},{key:"cell(targetLabel)",fn:function(e){return[a("NodeIconLink",{attrs:{nodeID:e.item.targetID}})]}},{key:"cell(sourceDates)",fn:function(e){return[a("YearRangeDisplay",{attrs:{minYear:e.item.sourceDates.minYear,maxYear:e.item.sourceDates.maxYear,showDuration:!0}})]}},{key:"cell(targetDates)",fn:function(e){return[a("YearRangeDisplay",{attrs:{minYear:e.item.targetDates.minYear,maxYear:e.item.targetDates.maxYear,showDuration:!0}})]}}])})],1)],1),a("b-row",[a("b-col",[a("b-pagination",{attrs:{size:"sm","total-rows":e.filterCount,"per-page":e.perPage,"aria-controls":"my-table","first-number":!0,"last-number":!0},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1),a("b-col",{staticClass:"text-right"},[e._v("Showing "+e._s(e.filterCount)+" of "+e._s(e.items.length))])],1)],1)},rr=[],nr={components:{NodeIconLink:Ve,YearRangeDisplay:pa,StatusKey:ha},props:{phaseID:{type:String,required:!1,default:""},filter:{type:String,required:!1,default:""}},setup:function(e){var t=Object(n["c"])("store"),a=Object(n["h"])([]),r=Object(n["h"])(!1),i=25,o=Object(n["h"])(1),s=Object(n["h"])(0),l=function(e,t){s.value=t},c=Object(n["a"])((function(){return t.getters.labelByID(e.phaseID)})),u=function(e,a){if(e&&"row"===a){var r=t.getters.classByID(e.sourceID),n=t.getters.classByID(e.targetID);return W(r,n,e.stratRelationship,e.tempRelationship)}},d=[{key:"sourceLabel",label:"identifier",sortable:!0,sortByFormatted:!0,formatter:function(e,t,a){return"".concat(a.sourceClass).concat(a.sourceLabel)}},{key:"sourceDates",label:"years (duration)",sortable:!1},{key:"stratRelationship",label:"stratigraphic",sortable:!0},{key:"tempRelationship",label:"temporal",sortable:!0},{key:"targetLabel",label:"identifier",sortable:!0,sortByFormatted:!0,formatter:function(e,t,a){return"".concat(a.targetClass).concat(a.targetLabel)}},{key:"targetDates",label:"years (duration)",sortable:!1}],p=Object(n["a"])((function(){return e.phaseID}));Object(n["k"])(p,function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.value=[],r.value=!0,s.value=0,e.next=5,f(t);case 5:s.value=a.value.length,r.value=!1;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var f=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(r){var n,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=[],i=t.getters.nodeByID(r),i){e.next=4;break}return e.abrupt("return",n);case 4:o=new Map,t.getters.descendantsOfID(r).filter(N).forEach((function(e){var a=t.getters.ancestorsOfNode(e).map((function(e){return e.data.id})).concat(e.data.id);o.set(e.data.id,a)})),t.getters.edges.filter((function(e){return o.has(e.data.source)&&o.has(e.data.target)})).filter((function(e){return e.data.type===v.ABOVE})).forEach((function(e){var a=new Set(o.get(e.data.source)),r=new Set(o.get(e.data.target));a.forEach((function(e){r.has(e)&&(a.delete(e),r.delete(e))})),a.forEach((function(e){var a=t.getters.classByID(e),i=t.getters.labelByID(e),o=t.getters.derivedNodeDates(e);r.forEach((function(r){var s=t.getters.classByID(r),l=t.getters.labelByID(r),c=t.getters.derivedNodeDates(r);n.push({sourceClass:a,targetClass:s,sourceID:e,targetID:r,sourceLabel:i,targetLabel:l,sourceDates:o,targetDates:c,stratRelationship:v.ABOVE,tempRelationship:X(o,c)})}))}))})),a.value=n;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{store:t,fields:d,perPage:i,currentPage:o,filterCount:s,onFiltered:l,selectedPhaseLabel:c,items:a,isBusy:r,rowClass:u}}},ir=nr,or=(a("6a78"),Object(ae["a"])(ir,ar,rr,!1,null,"aaf2b666",null)),sr=or.exports,lr={components:{PhaseDTR:tr,PhaseDSR:sr},setup:function(){var e=Object(n["c"])("store"),t=Object(n["h"])(""),a=Object(n["h"])("");Object(n["k"])(a,(function(){t.value=""}));var r=Object(n["a"])((function(){return e.getters.labelByID(a.value)})),i=Object(n["a"])((function(){return e.getters.phaseOptions.concat({value:"",text:"(none)",selected:!0})}));return{store:e,filter:t,phaseLookupOptions:i,selectedPhaseID:a,selectedPhaseLabel:r}}},cr=lr,ur=Object(ae["a"])(cr,Xa,Wa,!1,null,null,null),dr=ur.exports,pr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{staticClass:"p-2",attrs:{fluid:""}},[a("b-row",[a("b-col",[a("b-button",{staticClass:"text-left shadow mr-2",attrs:{pill:"",size:"sm",variant:"primary",title:"Refresh table",alt:"Refresh table"},on:{click:function(t){return t.stopPropagation(),e.refresh()}}},[a("b-icon-arrow-clockwise"),e._v("Refresh table")],1),a("b-button",{staticClass:"text-left shadow",attrs:{pill:"",size:"sm",disabled:0==e.items.length,variant:"primary",title:"Copy to clipboard",alt:"Copy to clipboard"},on:{click:function(t){return t.stopPropagation(),e.itemsToClipboard()}}},[a("b-icon-clipboard-plus",{staticClass:"mr-2"}),a("span",[e._v("Copy to clipboard")])],1),a("StatusKey")],1),a("b-col",{attrs:{cols:"4"}},[a("b-form-group",{staticClass:"mb-2",attrs:{label:"Filter","label-for":"filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"},scopedSlots:e._u([{key:"label",fn:function(){return[a("b-icon-search")]},proxy:!0}])},[a("b-form-input",{staticClass:"shadow-sm",attrs:{size:"sm",id:"filter-input",type:"search",autocomplete:"off",placeholder:"filter records"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),a("div",{staticClass:"text-secondary text-right"},[e._v("Showing "+e._s(e.filterCount)+" of "+e._s(e.items.length))])],1)],1)],1),a("b-row",[a("b-col",[a("b-table",{ref:"groupmatrix",staticClass:"shadow-sm",attrs:{"sort-icon-left":"",outlined:"",small:"","show-empty":"",id:"groupmatrix",busy:e.isBusy,"no-border-collapse":!0,"sticky-header":!0,"select-mode":"single","filter-ignored-fields":["sourceID","targetID"],"filter-included-fields":["sourceLabel","targetLabel","stratRelationship","tempRelationship"],filter:e.filter,items:e.items,fields:e.fields,"tbody-tr-class":e.rowClass},on:{filtered:e.onFiltered},scopedSlots:e._u([{key:"thead-top",fn:function(){return[a("b-tr",[a("b-th",{staticClass:"text-center",attrs:{colspan:"2"}},[e._v("source")]),a("b-th",{staticClass:"text-center border-left border-right",attrs:{colspan:"2"}},[e._v("relationship")]),a("b-th",{staticClass:"text-center",attrs:{colspan:"2"}},[e._v("target")])],1)]},proxy:!0},{key:"cell(sourceLabel)",fn:function(e){return[a("NodeIconLink",{attrs:{nodeID:e.item.sourceID}})]}},{key:"cell(targetLabel)",fn:function(e){return[a("NodeIconLink",{attrs:{nodeID:e.item.targetID}})]}},{key:"cell(sourceDates)",fn:function(e){return[a("YearRangeDisplay",{attrs:{minYear:e.item.sourceDates.minYear,maxYear:e.item.sourceDates.maxYear,showDuration:!0}})]}},{key:"cell(targetDates)",fn:function(e){return[a("YearRangeDisplay",{attrs:{minYear:e.item.targetDates.minYear,maxYear:e.item.targetDates.maxYear,showDuration:!0}})]}}])})],1)],1),a("b-row",[a("b-col",[a("GroupMatrixDiagram",{attrs:{items:e.items}})],1)],1)],1)},fr=[],br=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"holder"}},[a("b-button",{staticClass:"text-left shadow",attrs:{pill:"",size:"sm",variant:"primary",title:"Refresh diagram",alt:"Refresh diagram"},on:{click:function(t){return t.stopPropagation(),e.refresh()}}},[a("b-icon-arrow-clockwise"),a("span",[e._v("Refresh diagram")])],1),a("div",{staticClass:"overflow-auto w-100",attrs:{id:"holder"}},[a("cytoscape",{ref:"cy",attrs:{id:"groupmatrix",config:e.config,preConfig:e.preConfig}},[e._l(e.elements.nodes,(function(e){return a("cy-element",{key:e.data.id,class:e.data.class,attrs:{id:"node.data.id",definition:e}})})),e._l(e.elements.edges,(function(e){return a("cy-element",{key:e.data.id,class:e.data.class,attrs:{definition:e}})}))],2)],1)],1)},mr=[],gr=a("b17d"),hr=a.n(gr),vr={props:{disabled:{type:Boolean,required:!1,default:!1},items:{type:Array,required:!1,default:function(){return[]}},gridSize:{type:Number,required:!1,default:40}},setup:function(e){var t=Object(n["c"])("store"),a=Object(n["i"])(null),r=Object(n["a"])((function(){var a=t.getters.groups,r=e.items.filter((function(e){return e.stratRelationship==v.ABOVE})).map((function(e){return{data:{source:e.sourceID,target:e.targetID}}}));return{nodes:a,edges:r}})),i={pixelRation:1,selectionType:"single",minZoom:.05,maxZoom:2,layoutDagre:{name:"dagre",nodeSep:e.gridSize-4,edgeSep:e.gridSize,rankSep:2*e.gridSize-4,marginx:e.gridSize/2,marginy:e.gridSize/2,rankDir:"TB",ranker:"network-simplex",minLen:function(e){return 1},fit:!0,padding:e.gridSize/2,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,boundingBox:void 0,ready:l,stop:c},style:[{selector:"node",style:{"min-zoomed-font-size":"1em","font-family":"Arial","font-size":"2em",shape:"rectangle",width:2*e.gridSize,height:1*e.gridSize,padding:0,"text-opacity":1,"text-valign":"center","text-halign":"center",color:x.NODE_FG,"background-color":x.NODE_BG,"background-opacity":1,"border-color":x.NODE_FG,"border-width":"4px","border-style":"solid","border-opacity":1}},{selector:'node[class="'.concat(y.GROUP,'"]'),style:{shape:"round-rectangle",label:function(e){return"".concat(e.data("label")?e.data("label"):e.data("id"))},"text-opacity":1,"text-margin-y":2,color:x.GROUP_FG,"background-color":x.GROUP_BG,"border-color":x.GROUP_FG}},{selector:'node[class="'.concat(y.GROUP,'"]:selected'),style:{"background-color":x.SELECTED_BG}},{selector:"edge",style:{"curve-style":"taxi","taxi-direction":"downward","taxi-turn":e.gridSize/2,"edge-distances":"intersection","taxi-turn-min-distance":e.gridSize/2,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node",width:3,"line-color":x.EDGE,"line-style":"solid"}},{selector:"edge.connected",style:{"line-color":x.EDGE_CONNECTED,width:8}},{selector:"edge:selected",style:{"line-color":x.EDGE_SELECTED}}]},o=function(e){e.use(hr.a)},s=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.value.instance,t){e.next=3;break}return e.abrupt("return");case 3:t.layout(i.layoutDagre).run(),t.fit();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){console.log("layoutready")},c=function(){console.log("layoutstop")};return Object(n["g"])((function(){document.getElementById("cytoscape-div").style.minHeight="900px"})),{cy:a,store:t,refresh:s,elements:r,config:i,preConfig:o}}},yr=vr,Or=Object(ae["a"])(yr,br,mr,!1,null,null,null),xr=Or.exports,Cr={components:{GroupMatrixDiagram:xr,NodeIconLink:Ve,YearRangeDisplay:pa,StatusKey:ha},props:{disabled:{type:Boolean,required:!1,default:!1}},setup:function(){var e=Object(n["c"])("store"),t=Object(n["h"])([]),a=Object(n["i"])(null),r=Object(n["h"])(!1),i=[{key:"sourceLabel",label:"identifier",sortable:!0,sortByFormatted:!0,formatter:function(e,t,a){return a.sourceLabel}},{key:"sourceDates",label:"years (duration)",sortable:!1},{key:"stratRelationship",label:"stratigraphic",sortable:!0},{key:"tempRelationship",label:"temporal",sortable:!0},{key:"targetLabel",label:"identifier",sortable:!0,sortByFormatted:!0,formatter:function(e,t,a){return a.targetLabel}},{key:"targetDates",label:"years (duration)",sortable:!1}],o=function(t,a){if(t&&"row"===a){var r=e.getters.classByID(t.sourceID),n=e.getters.classByID(t.targetID);return W(r,n,t.stratRelationship,t.tempRelationship)}},s=Object(n["h"])(""),l=Object(n["h"])(0),c=function(e,t){l.value=t},u=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.value=!0,t.value=[],s.value="",l.value=0,e.next=6,f();case 6:t.value=e.sent,l.value=t.value.length,r.value=!1;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=t.value.map((function(e){return{sourceID:e.sourceLabel,sourceMinYear:e.sourceDates.minYear,sourceMaxYear:e.sourceDates.maxYear,stratigraphic:e.stratRelationship,temporal:e.tempRelationship,targetID:e.targetLabel,targetMinYear:e.targetDates.minYear,targetMaxYear:e.targetDates.maxYear}})),a=g.a.unparse(JSON.stringify(e),{delimiter:"\t"});navigator.clipboard.writeText(a)},f=function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new Map,e.getters.contexts.forEach((function(t){var r=e.getters.ancestorsOfNode(t).find(_)||null;a.set(t.data.id,{contextID:t.data.id,inGroupID:r?r.data.id:null,above:new Set})})),e.getters.edges.filter((function(e){return e.data.type===v.ABOVE})).forEach((function(e){var t=a.get(e.data.source);t.above.add(e.data.target)})),r=function e(t){var r=new Set,n=a.get(t);return n.above.forEach((function(t){var n=a.get(t);if(n.inGroupID)r.add(t);else if(n.above.size>0){var i=e(t);r=new Set([].concat(Object(p["a"])(r),Object(p["a"])(i)))}})),Object(p["a"])(r)},a.forEach((function(e){e.inGroupID&&e.above.forEach((function(t){var n=a.get(t);if(!n.inGroupID){var i=r(t);e.above.delete(t),i.forEach((function(t){return e.above.add(t)}))}}))})),n=new Map,e.getters.groups.forEach((function(t){n.set(t.data.id,{id:t.data.id,label:e.getters.labelByID(t.data.id,!1),dates:e.getters.derivedNodeDates(t.data.id),above:new Set})})),a.forEach((function(e){var t=e.inGroupID;e.above.forEach((function(e){var r=a.get(e).inGroupID;if(t&&r&&t!==r){var i=n.get(t);i.above.add(r)}}))})),n.forEach((function(e){e.above.forEach((function(t){var a=n.get(t);a.above.has(e.id)&&(a.above.delete(e.id),e.above.delete(a.id))}))})),i=[],n.forEach((function(e){e.above.forEach((function(t){var a=e.id,r=e.label,o=e.dates,s=n.get(t).label,l=n.get(t).dates;i.push({sourceID:a,targetID:t,sourceLabel:r,targetLabel:s,sourceDates:o,targetDates:l,stratRelationship:v.ABOVE,tempRelationship:X(o,l)})}))})),t.abrupt("return",i);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{store:e,fields:i,NodeClass:y,groupmatrix:a,itemsToClipboard:d,items:t,isBusy:r,filter:s,filterCount:l,onFiltered:c,rowClass:o,refresh:u}}},Dr=Cr,wr=(a("5ee4"),Object(ae["a"])(Dr,pr,fr,!1,null,"ed7e749a",null)),Ir=wr.exports,kr={components:{ItemEditor:Ia,ValidationAsync:Ra,MetaEditor:Fa,SearchControls:qa,TemporalRelationships:dr,GroupMatrixTable:Ir,NodeIcon:ke},props:{selectedID:{type:String,required:!1,default:""}},setup:function(e){var t=Object(n["c"])("store"),a=Object(n["h"])(0),r=Object.values(y),i=function(a){var r=t.getters.classByID(e.selectedID),n=!1;switch(a){case 0:n=r==y.PHASE;break;case 1:n=r==y.GROUP;break;case 2:n=r==y.SUBGROUP;break;case 3:n=r==y.CONTEXT;break;case 4:n=r==y.DATING;break;case 5:n=r==y.PERIOD;break;case 6:n=r==O.EDGE;break}n||t.dispatch("setSelectedID",null)},o=function(e){switch(e){case y.PHASE:return t.getters.phases.length;case y.GROUP:return t.getters.groups.length;case y.SUBGROUP:return t.getters.subgroups.length;case y.CONTEXT:return t.getters.contexts.length;case y.DATING:return t.getters.datings.length;case y.PERIOD:return t.getters.periods.length;case O.EDGE:return t.getters.edges.length;default:return 0}},s=Object(n["a"])((function(){return e.selectedID}));return Object(n["k"])(s,(function(e){var r=t.getters.classByID(e);switch(r){case y.PHASE:a.value=0;break;case y.GROUP:a.value=1;break;case y.SUBGROUP:a.value=2;break;case y.CONTEXT:a.value=3;break;case y.DATING:a.value=4;break;case y.PERIOD:a.value=5;break;case O.EDGE:a.value=6;break}})),{tabIndex:a,nodeClasses:r,EdgeClass:O,itemCount:o,activated:i}}},Er=kr,jr=Object(ae["a"])(Er,Ye,Pe,!1,null,null,null),Sr=jr.exports,_r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-overlay",{attrs:{show:e.busy,rounded:"sm"}},[a("div",{staticClass:"overflow-auto position-relative",attrs:{id:"holder"}},[a("Lock",{staticClass:"position-absolute m-2",attrs:{id:"lock"},on:{input:e.lockChanged},model:{value:e.locked,callback:function(t){e.locked=t},expression:"locked"}}),a("Legend",{staticClass:"position-absolute m-2",attrs:{id:"legend"}}),a("b-button",{staticClass:"position-absolute m-2 shadow",attrs:{size:"sm",id:"refresh",title:"Refresh diagram",alt:"Refresh diagram",disabled:e.busy,variant:"primary"},on:{click:function(t){return t.stopPropagation(),e.refreshDiagram()}}},[a("b-icon-arrow-clockwise")],1),a("cytoscape",{ref:"cy",attrs:{id:"diagram",config:e.config,preConfig:e.preConfig,afterCreated:e.afterCreated}},[e._l(e.nodes,(function(t){return a("cy-element",{key:t.data.id,class:t.data.class,attrs:{definition:t,sync:!1},on:{click:function(a){return e.elementSelected(a,t)}}})})),e._l(e.edges,(function(t){return a("cy-element",{key:t.data.id,class:t.data.class,attrs:{definition:t,sync:!1},on:{click:function(a){return e.elementSelected(a,t)}}})}))],2)],1)])},Nr=[],Tr=a("8d3a"),Yr=a.n(Tr),Pr=a("7436"),Rr=a.n(Pr),Br=a("1e16"),Gr=a.n(Br),Lr=a("1157"),Ur=a.n(Lr),Ar=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Fr=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-card",{directives:[{name:"b-toggle",rawName:"v-b-toggle.legendItems",modifiers:{legendItems:!0}}],staticClass:"legend card shadow text-secondary",attrs:{"no-body":""}},[a("div",{staticClass:"card-header px-3 py-1"},[a("b-icon-key",{staticClass:"mr-2"}),e._v("Key")],1),a("b-collapse",{staticClass:"card-body m-0 px-3 py-1",attrs:{id:"legendItems"}},[a("b-list-group",{staticClass:"bg-light",attrs:{flush:""}},e._l(e.items,(function(t,r){return a("b-list-group-item",{key:r,staticClass:"m-0 p-0 border-0"},[a("NodeIcon",{attrs:{width:30,height:16,dashed:t.dashed,reversed:t.reversed,selected:t.selected,nodeClass:t.nodeClass,text:t.nodeClass.slice(0,1).toUpperCase()}}),a("span",{staticClass:"ml-1"},[e._v(e._s(t.label))])],1)})),1)],1)],1)}],zr={components:{NodeIcon:ke},setup:function(){var e=[{label:"Phase",nodeClass:y.PHASE,dashed:!0},{label:"Group",nodeClass:y.GROUP},{label:"Sub-Group",nodeClass:y.SUBGROUP},{label:"Context (undated)",nodeClass:y.CONTEXT},{label:"Context (dated)",nodeClass:y.CONTEXT,reversed:!0},{label:"Selected",nodeClass:y.CONTEXT,selected:!0}];return{items:e}}},Mr=zr,Vr=(a("89e4"),Object(ae["a"])(Mr,Ar,Fr,!1,null,"7be0177c",null)),Hr=Vr.exports,$r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lock",attrs:{title:e.locked?"locked":"unlocked",alt:e.locked?"locked":"unlocked"}},[a("b-form-checkbox",{staticClass:"shadow",attrs:{button:"",size:"sm",checked:e.value,disabled:e.disabled,"button-variant":e.locked?"success":"danger"},on:{input:e.changed}},[e.locked?a("b-icon-lock-fill"):a("b-icon-unlock-fill")],1)],1)},qr=[],Xr={props:{disabled:{type:Boolean,required:!1,default:!1},value:{type:Boolean,required:!1,default:!0}},setup:function(e,t){var a=Object(n["h"])(e.value),r=function(e){a.value=e,t.emit("input",e)};return{locked:a,changed:r}}},Wr=Xr,Kr=(a("c9b4"),Object(ae["a"])(Wr,$r,qr,!1,null,"b7dca77e",null)),Jr=Kr.exports,Zr={components:{Legend:Hr,Lock:Jr},props:{gridSize:{type:Number,required:!1,default:40}},setup:function(e){var t=Object(n["c"])("store"),a=Object(n["i"])(null),i=Object(n["h"])(!1),o=Object(n["a"])({get:function(){return t.getters.diagramLock},set:function(e){var r=a.value.instance;r&&r.autolock(e),t.dispatch("setDiagramLock",e)}}),s=function(e){o.value=e},l={pixelRation:1,selectionType:"single",minZoom:.05,maxZoom:2,panzoom:{zoomFactor:.05,zoomDelay:45,minZoom:.05,maxZoom:2,fitPadding:50,panSpeed:20,panDistance:20,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"},navigator:{container:"#navigator",viewLiveFramerate:1,thumbnailEventFramerate:1,thumbnailLiveFramerate:1,dblClickDelay:200,removeCustomContainer:!1,rerenderDelay:100},gridguide:{snapToGridOnRelease:!1,snapToGridDuringDrag:!0,snapToAlignmentLocationOnRelease:!1,snapToAlignmentLocationDuringDrag:!1,distributionGuidelines:!0,geometricGuideline:!0,initPosAlignment:!1,centerToEdgeAlignment:!1,resize:!1,parentPadding:!1,drawGrid:!0,gridSpacing:e.gridSize,snapToGridCenter:!0,zoomDash:!0,panGrid:!0,gridStackOrder:0,gridColor:"#dedede",lineWidth:1,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:400,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]},parentSpacing:-1},layoutDagre:{name:"dagre",nodeSep:e.gridSize-4,rankSep:e.gridSize-4,marginx:e.gridSize/2,marginy:e.gridSize/2,rankDir:"TB",ranker:"network-simplex",minLen:function(e){return 1},fit:!1,padding:e.gridSize/2,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,boundingBox:void 0},layoutElk:{name:"elk",nodeDimensionsIncludeLabels:!1,fit:!1,padding:e.gridSize/2,animate:!1,animationDuration:500,animationEasing:void 0,transform:function(e,t){return t},ready:void 0,stop:void 0,elk:{algorithm:"layered",alignment:"LEFT",layered:{unnecessaryBendpoints:!0},mrtree:{searchOrder:"DFS",weighting:"DESCENDANTS"}}},layoutKlay:{name:"klay",nodeDimensionsIncludeLabels:!1,fit:!1,padding:e.gridSize/2,animate:!1,animateFilter:function(){return!0},animationDuration:500,animationEasing:void 0,transform:function(e,t){return t},ready:void 0,stop:void 0,klay:{addUnnecessaryBendpoints:!1,aspectRatio:1.6,borderSpacing:20,compactComponents:!1,crossingMinimization:"LAYER_SWEEP",cycleBreaking:"GREEDY",direction:"DOWN",edgeRouting:"ORTHOGONAL",edgeSpacingFactor:.5,feedbackEdges:!1,fixedAlignment:"NONE",inLayerSpacingFactor:1,layoutHierarchy:!1,linearSegmentsDeflectionDampening:.3,mergeEdges:!1,mergeHierarchyCrossingEdges:!0,nodeLayering:"NETWORK_SIMPLEX",nodePlacement:"BRANDES_KOEPF",randomizationSeed:1,routeSelfLoopInside:!1,separateConnectedComponents:!0,spacing:20,thoroughness:7},priority:function(){return null}},layoutBreadthFirst:{name:"breadthfirst",fit:!1,directed:!0,padding:e.gridSize/2,circle:!1,grid:!1,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},style:[{selector:"node",style:{"min-zoomed-font-size":"1em","font-family":"Arial","font-size":"2em",shape:"rectangle",width:3*e.gridSize,height:1*e.gridSize,padding:0,"text-opacity":1,"text-valign":"center","text-halign":"center",color:x.NODE_FG,"background-color":x.NODE_BG,"background-opacity":1,"border-color":x.NODE_FG,"border-width":"4px","border-style":"solid","border-opacity":1}},{selector:'node[class="'.concat(y.CONTEXT,'"]'),style:{shape:"round-rectangle",label:function(e){return"".concat(e.data("label")?e.data("label"):e.data("id"))},color:function(e){return t.getters.contextHasDating(e.data("id"))?x.CONTEXT_BG:x.CONTEXT_FG},"background-color":function(e){return t.getters.contextHasDating(e.data("id"))?x.CONTEXT_FG:x.CONTEXT_BG}}},{selector:'node[class="'.concat(y.CONTEXT,'"]:selected'),style:{color:x.CONTEXT_FG}},{selector:'node[class="'.concat(y.PHASE,'"]'),style:{"text-opacity":.75,"text-valign":"top","text-halign":"right","text-margin-x":5,"text-margin-y":15,"min-width":800,padding:e.gridSize,color:"gray","background-opacity":0,"background-color":"transparent","border-color":"lightgray","border-width":0}},{selector:'node[class="'.concat(y.GROUP,'"]'),style:{label:function(e){return"".concat(e.data("label")?e.data("label"):e.data("id"))},"text-opacity":.75,"text-valign":"top","text-halign":"right","text-margin-x":5,"text-margin-y":15,color:x.GROUP_FG,"background-color":x.GROUP_BG,"border-color":x.GROUP_FG,"compound-sizing-wrt-labels":"include"}},{selector:'node[class="'.concat(y.SUBGROUP,'"]'),style:{label:function(e){return"".concat(e.data("label")?e.data("label"):e.data("id"))},"text-opacity":.75,"text-valign":"center","text-halign":"right","text-margin-x":5,"text-justification":"auto",color:x.SUBGROUP_FG,"background-color":x.SUBGROUP_BG,"border-color":x.SUBGROUP_FG}},{selector:"node:selected",style:{"background-color":x.SELECTED_BG,"background-opacity":1,"border-width":6}},{selector:"edge",style:{"curve-style":"taxi","taxi-direction":"downward","taxi-turn":e.gridSize/2,"edge-distances":"intersection","taxi-turn-min-distance":e.gridSize/2,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node",width:3,"line-color":x.EDGE,"line-style":"solid"}},{selector:"edge.connected",style:{"line-color":x.EDGE_CONNECTED,width:8}},{selector:"edge:selected",style:{"line-color":x.EDGE_SELECTED,width:8}}]},c=Object(n["a"])((function(){return t.getters.selectedID}));Object(n["k"])(c,(function(e,t){var r=a.value.instance;if(r){var n=r.$id(t);n&&(n.unselect(),n.removeClass("selected"),n.connectedEdges().removeClass("connected")),n=r.$id(e),n&&(n.select(),n.addClass("selected"),n.connectedEdges().addClass("connected"))}}));var u=Object(n["h"])([]),d=Object(n["h"])([]),p=function(){var e=a.value.instance;e&&(i.value=!0,r["default"].set(u,"value",[].concat(t.getters.phases).concat(t.getters.groups).concat(t.getters.subgroups).concat(t.getters.contexts).slice()),r["default"].set(d,"value",t.getters.edges.filter((function(e){return e.data.type==v.ABOVE})).slice()),i.value=!1)},f=function(e){e.use(hr.a),e.use(Yr.a),e.use(Rr.a),e.use(Gr.a),e.use(Ur.a)},m=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(a,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.dispatch("setSelectedID",(null===(n=r.data)||void 0===n?void 0:n.id)||""));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),g=function(e){e.panzoom(l.panzoom),e.gridGuide(l.gridguide)},h=function(e){return C(e,!1)},O=function(e){return C(e,!0)},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var a=e.png({full:t,output:"blob"}),r="phaser-".concat(D(),".png"),n=new Blob([a],{type:"image/png"});if(navigator.msSaveBlob)navigator.msSaveBlob(n,r);else{var i=document.createElement("a");if(void 0!==i.download){var o=URL.createObjectURL(n);i.setAttribute("href",o),i.setAttribute("download",r),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}}}},w=function(e){u.value=[],d.value=[],I(e)},I=function(e){e.zoom(1),e.pan({x:0,y:0})},k=function(e){e&&e.fit()},E=function(e){return S(e,1.25)},j=function(e){return S(e,.75)},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e&&e.zoom({level:e.zoom()*t,position:{x:Math.round((e.extent().x1+e.extent().x2)/2),y:Math.round((e.extent().y1+e.extent().y2)/2)}})},_=function(e){if(e&&!o.value){i.value=!0,w(e),p();var t=e.layout(l.layoutDagre);t.on("layoutstop",N()),t.run(),i.value=!1}},N=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=a.value.instance,r){e.next=3;break}return e.abrupt("return");case 3:r.elements("node").forEach((function(e){t.dispatch("updateNodePosition",{data:e.data(),position:e.position()})}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(e){if(e){var t=a.value.instance;if(t){var r=t.extent();t.elements('node[class = "phase"]').forEach((function(t){var a=200*r.w,n=t.layoutDimensions().h,i=r.x1,o=t.position().y-n/2;e.strokeStyle=x.PHASE_FG,e.lineWidth=4,e.setLineDash([12,4]),e.beginPath(),e.moveTo(i,o),e.lineTo(a,o),e.stroke(),e.font="2em Arial",e.textBaseline="top",e.fillStyle=x.PHASE_FG;var s=t.data().label;e.textAlign="left",e.fillText(s,r.x1+10,o+10),e.textAlign="right",e.fillText(s,r.x2-10,o+10)}))}}},Y=Object(n["a"])((function(){return t.getters.edges.filter((function(e){return e.data.type===v.EQUAL}))})),P=function(r){if(r){var i=a.value.instance;i&&Object(n["j"])(Y).forEach((function(a){var n=t.getters.nodeByID(a.data.source),i=t.getters.nodeByID(a.data.target);if(n&&i){var o=n.position.x,s=n.position.y,l=i.position.x,c=i.position.y,u=1.5*e.gridSize+2;l>o?(o+=u,l-=u):(o-=u,l+=u),r.setLineDash([]),a.data.source==t.getters.selectedID||a.data.target==t.getters.selectedID?(r.strokeStyle=x.EDGE_CONNECTED,r.lineWidth=4):(r.strokeStyle=x.EDGE,r.lineWidth=3),r.beginPath(),r.moveTo(o,s-3),r.lineTo(l,c-3),r.stroke(),r.moveTo(o,s+3),r.lineTo(l,c+3),r.stroke()}}))}},R=function(){var e=document.createTextNode("+");Array.from(document.getElementsByClassName("cy-panzoom-zoom-in")).forEach((function(t){return t.appendChild(e)}));var t=document.createTextNode("-");Array.from(document.getElementsByClassName("cy-panzoom-zoom-out")).forEach((function(e){return e.appendChild(t)}))};return Object(n["g"])((function(){var e=a.value.instance;if(e){e.autolock(o.value),R(),e.on("tapend","node",(function(e){var a=e.target.data(),r=e.target.position();t.dispatch("updateNodePosition",{data:a,position:r})}));var r=e.cyCanvas(),n=r.getCanvas(),i=n.getContext("2d");e.on("render pan",(function(){r.resetTransform(i),r.clear(i),r.setTransform(i),T(i),P(i)})),document.getElementById("cytoscape-div").style.minHeight="900px",je.$on("diagram-clear",(function(){return w(e)})),je.$on("diagram-refresh",(function(){return p(e)})),je.$on("diagram-zoom-in",(function(){return E(e)})),je.$on("diagram-zoom-out",(function(){return j(e)})),je.$on("diagram-zoom-fit",(function(){return k(e)})),je.$on("diagram-export-part-png",(function(){return h(e)})),je.$on("diagram-export-full-png",(function(){return O(e)})),je.$on("diagram-redo-layout",(function(t){return _(e,t)})),je.$on("diagram-redo-compound-layout",(function(a){var r,n=e.$id(null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.id);if(n){var i=n.boundingBox(),o={x:i.x1,y:i.y1},s=n.descendants(),c=s.edgesWith(s),u=s.merge(c).layout(l.layoutDagre);u.on("layoutstop",N()),u.run();var d=n.boundingBox(),p={x:o.x+d.w/2-5,y:o.y+d.h/2};n.position(p),t.dispatch("updateNodePosition",{data:n.data(),position:n.position()})}})),je.$on("node-parent-changed",(function(t){var a=e.$id(t.data.id);a&&""!==t.data.parent?a.move({parent:t.data.parent}):a.move({parent:null})}))}})),Object(n["e"])((function(){})),{cy:a,busy:i,locked:o,config:l,nodes:u,edges:d,preConfig:f,afterCreated:g,lockChanged:s,elementSelected:m,refreshDiagram:p}}},Qr=Zr,en=(a("fc76"),Object(ae["a"])(Qr,_r,Nr,!1,null,null,null)),tn=en.exports,an=a("9a78"),rn=a.n(an),nn={components:{MenuBar:Te,ItemEditors:Sr,MatrixDiagramCY:tn,VueSplitter:rn.a},setup:function(){var e=Object(n["c"])("store");return Object(n["g"])((function(){return document.title="".concat(e.getters.appName," v").concat(e.getters.appVersion)})),{store:e}}},on=nn,sn=(a("034f"),Object(ae["a"])(on,i,o,!1,null,null,null)),ln=sn.exports,cn=a("5f5b"),un=a("b1e0"),dn=(a("f9e3"),a("2dd8"),a("0541"),a("2f62"));r["default"].use(dn["a"]);var pn={appName:"Phaser",appVersion:"1.18",selectedID:"",diagramLock:!0,paginated:!0,about:{title:"",description:"",creator:"",contact:"",license:"",version:""},nodes:{},edges:{},types:Object.freeze({groupTypes:["Building","Corn-drying oven","Ditch overall","Drain","Four-post structure","Hearth","Kiln","Oven","Post-hole: group","Road","Structure","Well"],contextTypes:["Animal disturbance","Animal disturbance: fill","Ard mark","Ard mark: fill","Bank","Beam slot","Beam slot: fill","Beam","Coffin","Coffin: fill","Coffin: stain","Corn-drying oven: cut","Corn-drying oven: fill","Corn-drying oven: wall","Cremation pit","Cremation pit: fill","Cremation vessel","Cremation vessel: fill","Cremation","Ditch segment","Ditch segment: fill","Ditch","Ditch: fill","Drain: capping","Drain: construction trench fill","Drain: construction trench","Drain: fill","Drain: lining","Drain: packing","Drain: pipe","Drove way","Enclosure","Feature","Feature: fill","Floor","Floor: tessellated","Flue","Flue: fill","Foundation: cut","Foundation: layer","Furnace","Grave","Grave: fill","Gully","Gully: fill","Hearth pit","Hearth pit: fill","Hearth: debris","Hoof print","Hoof print: fill","Interface","Kiln: debris","Kiln: fill","Kiln: lining","Layer","Layer: accumulation","Layer: buried soil","Layer: levelling","Layer: natural","Layer: occupation","Layer: plough soil","Layer: redeposited natural","Layer: rubble","Layer: subsoil","Layer: topsoil","Lens","Linear feature","Linear feature: fill","Modern intrusion","Modern intrusion: fill","Natural feature","Natural feature: fill","Palaeochannel","Palaeochannel: fill","Pit","Pit, cess","Pit, cess: fill","Pit: fill","Pit: lining","Plough furrow","Plough furrow: fill","Plough mark","Plough mark: fill","Post-hole","Post-hole: fill","Post-hole: packing","Post-pad","Post-pipe","Post-pipe: fill","Pottery: spread","Quarry pit","Quarry pit: fill","Ring ditch","Robbing trench","Robbing trench: fill","Stake","Stake-hole","Stake-hole: fill","Stoke hole","Stoke hole: fill","Surface","Surface: earth/clay","Surface: metalled","Surface: mortar","Surface: paved","Threshold","Tree hollow","Tree hollow: fill","Trial trench","Trial trench: fill","Vessel","Vessel: fill","Wall","Wall: construction trench fill","Wall: construction trench","Well: construction pit fill","Well: construction pit","Well: fill","Well: lining","Wheel rut","Wheel rut: fill"],datingTypes:["find","sample","manual"]})},fn=function(e,t){return e.text>t.text?1:-1},bn=function(e){return e.map((function(e){return{value:e,text:e}}))},mn={appName:function(e){return e.appName},appVersion:function(e){return e.appVersion},selectedID:function(e){return e.selectedID},diagramLock:function(e){return e.diagramLock},paginated:function(e){return e.paginated},about:function(e){return e.about},nodes:function(e){return Object.values(e.nodes).filter((function(e){return e}))},edges:function(e){return Object.values(e.edges).filter((function(e){return e}))},isNode:function(e){return function(t){return Object.hasOwn(e.nodes,t)}},isEdge:function(e){return function(t){return Object.hasOwn(e.edges,t)}},nodeByID:function(e){return function(t){return e.nodes[t]||null}},edgeByID:function(e){return function(t){return e.edges[t]||null}},edgesBySource:function(e,t){return function(e){return t.edges.filter((function(t){return t.data.source===e}))}},edgesByTarget:function(e,t){return function(e){return t.edges.filter((function(t){return t.data.target===e}))}},phases:function(e,t){return t.nodes.filter((function(e){return e.data.class===y.PHASE}))},groups:function(e,t){return t.nodes.filter((function(e){return e.data.class===y.GROUP}))},subgroups:function(e,t){return t.nodes.filter((function(e){return e.data.class===y.SUBGROUP}))},contexts:function(e,t){return t.nodes.filter((function(e){return e.data.class===y.CONTEXT}))},datings:function(e,t){return t.nodes.filter((function(e){return e.data.class===y.DATING}))},periods:function(e,t){return t.nodes.filter((function(e){return e.data.class===y.PERIOD}))},labelByID:function(e,t){return function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.isNode(e)){var r=t.nodeByID(e);return t.nodeLabel(r,a)}if(t.isEdge(e)){var n=t.edgeByID(e);return t.edgeLabel(n,a)}return""}},nodeLabel:function(){return function(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"";var r=E(null===(t=e.data)||void 0===t?void 0:t.label);if(a){var n,i=E(null===(n=e.data)||void 0===n?void 0:n.class);return"(".concat(i,") ").concat(r)}return r}},edgeLabel:function(e,t){return function(e){var a,r,n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"";var o=t.labelByID(null===(a=e.data)||void 0===a?void 0:a.source,i),s=t.labelByID(null===(r=e.data)||void 0===r?void 0:r.target,i),l=E(null===(n=e.data)||void 0===n?void 0:n.type);return"".concat(o," ").concat(l," ").concat(s)}},classByID:function(e,t){return function(e){if(t.isNode(e)){var a,r=t.nodeByID(e);return(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.class)||""}return t.isEdge(e)?O.EDGE:""}},hasDating:function(e,t){return function(e){return t.descendantsOfID(e).filter((function(e){return e.data.class===y.DATING&&e.data.included})).length>0}},contextHasDating:function(e,t){return function(e){return t.datings.filter((function(t){return t.data.included&&t.data.parent==e})).length>0}},groupTypeOptions:function(){return bn(pn.types.groupTypes)},contextTypeOptions:function(){return bn(pn.types.contextTypes)},datingTypeOptions:function(){return bn(pn.types.datingTypes)},phaseOptions:function(e,t){return t.phases.map((function(e){return{value:e.data.id,text:t.nodeLabel(e,!0)}})).sort(fn)},groupOptions:function(e,t){return t.groups.map((function(e){return{value:e.data.id,text:t.nodeLabel(e,!0)}})).sort(fn)},subgroupOptions:function(e,t){return t.subgroups.map((function(e){return{value:e.data.id,text:t.nodeLabel(e,!0)}})).sort(fn)},contextOptions:function(e,t){return t.contexts.map((function(e){return{value:e.data.id,text:t.nodeLabel(e,!0)}})).sort(fn)},periodOptions:function(e,t){return t.periods.map((function(e){return{value:e.data.id,text:e.data.label}})).sort(fn)},phaseOptionsGrouped:function(e,t){return 0==t.phaseOptions.length?[]:[{label:"Phases",options:t.phaseOptions}]},groupOptionsGrouped:function(e,t){return 0==t.groupOptions.length?[]:[{label:"Groups",options:t.groupOptions}]},subgroupOptionsGrouped:function(e,t){return 0==t.subgroupOptions.length?[]:[{label:"Subgroups",options:t.subgroupOptions}]},contextOptionsGrouped:function(e,t){return 0==t.contextOptions.length?[]:[{label:"Contexts",options:t.contextOptions}]},periodOptionsGrouped:function(e,t){return 0==t.periodOptions.length?[]:[{label:"Periods",options:t.periodOptions}]},contextParentOptions:function(e,t){return[].concat(Object(p["a"])(t.phaseOptionsGrouped),Object(p["a"])(t.groupOptionsGrouped),Object(p["a"])(t.subgroupOptionsGrouped))},childrenOfIDs:function(e,t){return function(e){return t.nodes.filter((function(t){return e.includes(t.data.parent)}))}},childrenOfID:function(e,t){return function(e){return t.nodes.filter((function(t){return t.data.parent==e}))}},descendantsOfIDs:function(e,t){return function(e){var a=[],r=t.childrenOfIDs(e),n=0;while(r.length>0&&n<5)a.push.apply(a,Object(p["a"])(r)),r=t.childrenOfIDs(r.map((function(e){return e.data.id}))),n++;return a}},descendantsOfID:function(e,t){return function(e){return t.descendantsOfIDs([e])}},ancestorsOfID:function(e,t){return function(e){var a=t.nodeByID(e);return t.ancestorsOfNode(a)}},ancestorsOfNode:function(e,t){return function(e){var a,r=[],n=0;if(!e)return[];var i=t.nodeByID(null===(a=e.data)||void 0===a?void 0:a.parent);while(i&&n<5){var o;r.push(i),i=t.nodeByID(null===(o=i.data)||void 0===o?void 0:o.parent),n++}return r}},derivedEdges:function(e,t){var a=new Map;return t.edges.filter((function(e){return e.data.type==v.ABOVE})).forEach((function(e){var r=new Set(t.ancestorsOfID(e.data.source).map((function(e){return e.data.id}))),n=new Set(t.ancestorsOfID(e.data.target).map((function(e){return e.data.id})));r.add(e.data.source),n.add(e.data.target),r.forEach((function(e){n.has(e)&&r.delete(e),n.delete(e)})),r.forEach((function(e){n.forEach((function(t){var r="edge-".concat(I(e),"-").concat(I(t));a.has(r)||a.set(r,{data:{id:r,source:e,target:t,type:v.ABOVE}})}))}))})),Object(p["a"])(a.values())},enteredDatesForID:function(e,t){return function(e){var a=t.nodeByID(e);return t.enteredDatesForNode(a)}},enteredDatesForNode:function(){return function(e){var t,a=(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.dating)||{},r={minYear:Number(a.minYear||Number.POSITIVE_INFINITY),maxYear:Number(a.maxYear||Number.NEGATIVE_INFINITY),minYearTolValue:Number(a.minYearTolValue||0),maxYearTolValue:Number(a.maxYearTolValue||0),minYearTolUnit:(a.minYearTolUnit||"years").trim().toLowerCase(),maxYearTolUnit:(a.maxYearTolUnit||"years").trim().toLowerCase()};return r.minYear<Number.POSITIVE_INFINITY&&0!==r.minYearTolValue&&("percent"==r.minYearTolUnit?r.minYear-=r.minYear*(r.minYearTolValue/100):r.minYear-=r.minYearTolValue),r.maxYear>Number.NEGATIVE_INFINITY&&0!==r.maxYearTolValue&&("percent"==r.maxYearTolUnit?r.maxYear+=r.maxYear*(r.maxYearTolValue/100):r.maxYear+=r.maxYearTolValue),{minYear:r.minYear<Number.POSITIVE_INFINITY?Math.round(r.minYear):null,maxYear:r.maxYear>Number.NEGATIVE_INFINITY?Math.round(r.maxYear):null}}},derivedDates:function(e,t){return function(e){return t.isNode(e)?t.derivedNodeDates(e):t.isEdge(e)?t.derivedEdgeDates(e):{minYear:null,maxYear:null}}},derivedEdgeDates:function(e,t){return function(e){var a=t.edgeByID(e);if(!a)return{minYear:null,maxYear:null};var r=t.derivedNodeDates(a.data.source),n=t.derivedNodeDates(a.data.target);return{minYear:n.maxYear?n.maxYear+1:null,maxYear:r.minYear?r.minYear-1:null}}},derivedNodeDates:function(e,t){return function(e){var a=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.descendantsOfID(e).filter((function(e){return e.data.class==y.DATING&&e.data.included&&e.data.dating})).forEach((function(e){var n=t.enteredDatesForNode(e);n.minYear<a&&(a=n.minYear),n.maxYear>r&&(r=n.maxYear)})),{minYear:a<Number.POSITIVE_INFINITY?Math.round(a):null,maxYear:r>Number.NEGATIVE_INFINITY?Math.round(r):null}}},derivedDuration:function(e,t){return function(e){var a=t.derivedDates(e);return null!==a.maxYear&&null!==a.minYear?a.maxYear-a.minYear+1:null}},derivedMinDuration:function(e,t){return function(e){var a=t.edgeByID(e);if(!a)return{minYear:null,maxYear:null};var r=t.derivedNodeDates(a.data.source),n=t.derivedNodeDates(a.data.target);return null!==r.minYear&&null!==n.maxYear?r.minYear-n.maxYear:null}},derivedMaxDuration:function(e,t){return function(e){var a=t.edgeByID(e);if(!a)return{minYear:null,maxYear:null};var r=t.derivedNodeDates(a.data.source),n=t.derivedNodeDates(a.data.target);return null!==r.maxYear&&null!==n.minYear?r.maxYear-n.minYear:null}},enteredDuration:function(e,t){return function(e){var a=t.enteredDatesForID(e);return null!==a.maxYear&&null!==a.minYear?a.maxYear-a.minYear+1:null}},newPhase:function(e,t){return function(){var e=y.PHASE,t=Ze()();return{data:{siteCode:"",id:"".concat(e,"-").concat(t),class:e,label:t,period:"",description:"",dating:{label:"",minYear:null,maxYear:null,minYearTolValue:0,maxYearTolValue:0,minYearTolUnit:"years",maxYearTolUnit:"years"}},position:{x:0,y:0}}}},newGroup:function(e,t){return function(){var e=y.GROUP,t=Ze()();return{data:{siteCode:"",id:"".concat(e,"-").concat(t),class:e,label:t,period:"",description:"",parent:"",type:"",cud:""},position:{x:0,y:0}}}},newSubGroup:function(e,t){return function(){var e=y.SUBGROUP,t=Ze()();return{data:{siteCode:"",id:"".concat(e,"-").concat(t),class:e,label:t,period:"",parent:"",type:"",cud:"",description:""},position:{x:0,y:0}}}},newContext:function(e,t){return function(){var e=y.CONTEXT,t=Ze()();return{data:{siteCode:"",id:"".concat(e,"-").concat(t),class:e,label:t,period:"",parent:"",type:"",cud:"",description:""},position:{x:0,y:0}}}},newDating:function(e,t){return function(){var e=y.DATING,t=Ze()();return{data:{siteCode:"",id:"".concat(e,"-").concat(t),class:e,label:t,period:"",parent:"",type:"",description:"",included:!0,association:"direct",dating:{label:"",minYear:null,maxYear:null,minYearTolValue:0,maxYearTolValue:0,minYearTolUnit:"years",maxYearTolUnit:"years"}}}}},newPeriod:function(e,t){return function(){var e=y.PERIOD,t=Ze()();return{data:{id:"".concat(e,"-").concat(t),class:e,label:t,uri:"",description:"",dating:{label:"",minYear:null,maxYear:null,minYearTolValue:0,maxYearTolValue:0,minYearTolUnit:"years",maxYearTolUnit:"years"}}}}},newEdge:function(e,t){return function(){var e=Ze()();return{data:{siteCode:"",id:"".concat(O.EDGE,"-").concat(e),class:O.EDGE,source:"",target:"",type:v.ABOVE}}}}},gn={loadMatrixData:function(e,t){return Object(b["a"])(regeneratorRuntime.mark((function a(){var r,n,i,o,s,l,c,u,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.commit,n=e.getters,i=e.dispatch,a.next=3,i("clearAll",r);case 3:o=J()(n.about,t.about||{}),r("SET_ABOUT",o),s=t.elements?t.elements:t,l=s.nodes||[],c=s.edges||[],u=l.map((function(e){var t,a=null,r=(null===(t=e.data)||void 0===t?void 0:t.class)||"";switch(r){case y.PHASE:a=n.newPhase();break;case y.GROUP:a=n.newGroup();break;case y.SUBGROUP:a=n.newSubGroup();break;case y.CONTEXT:a=n.newContext();break;case y.DATING:a=n.newDating();break;case y.PERIOD:a=n.newPeriod();break;default:break}return a?J()(a,e):null})).map((function(e){return e})),d=c.map((function(e){var t=n.newEdge();return e.data.class=O.EDGE,J()(t,e)})),r("BULK_LOAD_ELEMENTS",{nodes:u,edges:d});case 11:case"end":return a.stop()}}),a)})))()},clearAll:function(e){var t=e.commit;t("SET_ABOUT",{title:"",description:"",creator:"",contact:"",license:"",version:""}),t("DELETE_NODES"),t("DELETE_EDGES"),Promise.resolve()},insertNode:function(e,t){var a=e.commit;a("UPDATE_NODE",t),Promise.resolve()},insertNodes:function(e,t){var a=e.commit;t.forEach((function(e){return a("UPDATE_NODE",e)})),Promise.resolve()},updateNode:function(e,t){var a=e.commit;a("UPDATE_NODE",t)},updateNodePosition:function(e,t){var a,r=e.commit,n=e.getters,i=n.nodeByID(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.id);if(i){var o=Object.assign({},i);o.position=t.position,r("UPDATE_NODE",o)}Promise.resolve()},setSelectedID:function(e,t){var a=e.commit;a("SET_SELECTED_ID",t)},setDiagramLock:function(e,t){var a=e.commit;a("SET_DIAGRAM_LOCK",t)},setPaginated:function(e,t){var a=e.commit;a("SET_PAGINATED",t)},deleteNode:function(e,t){var a=e.commit,r=e.getters;r.childrenOfID(t.data.id).forEach((function(e){var t=Object.assign({},e);t.data.parent=null,a("UPDATE_NODE",t)}));var n=r.edgesBySource(t.data.id),i=r.edgesByTarget(t.data.id);n.concat(i).forEach((function(e){return a("DELETE_EDGE",e)})),a("DELETE_NODE",t)},createEdge:function(e){var t=e.commit,a=e.dispatch,r=e.getters,n=r.newEdge();a("insertEdge",n,t)},insertEdge:function(e,t){var a=e.commit;a("UPDATE_EDGE",t)},insertEdges:function(e,t){var a=e.commit,r=e.dispatch;t.forEach((function(e){return r("insertEdge",e,a)})),Promise.resolve()},updateEdge:function(e,t){var a=e.commit;a("UPDATE_EDGE",t)},deleteEdge:function(e,t){var a=e.commit;a("DELETE_EDGE",t)}},hn={SET_ABOUT:function(e,t){var a=Object.assign({},e.about,t);e.about=Object.freeze(a)},SET_SELECTED_ID:function(e,t){e.selectedID=t||""},SET_DIAGRAM_LOCK:function(e,t){e.diagramLock=t},SET_PAGINATED:function(e,t){e.paginated=t},BULK_LOAD_ELEMENTS:function(e,t){var a={},n={};(t.nodes||[]).forEach((function(e){var t,r=(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.id)||null;null!==r&&(Object.freeze(e),a[r]=e)})),(t.edges||[]).forEach((function(e){var t,a=(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.id)||null;null!==a&&(Object.freeze(e),n[a]=e)})),r["default"].set(e,"nodes",a),r["default"].set(e,"edges",n)},UPDATE_NODE:function(e,t){var a,n=(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.id)||null;if(null!==n){var i=Object.assign({},t);Object.freeze(i),r["default"].set(e.nodes,n,i)}},DELETE_NODE:function(e,t){var a,n=(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.id)||null;null!==n&&r["default"].set(e.nodes,n,null)},DELETE_NODES:function(e){e.nodes={}},UPDATE_EDGE:function(e,t){var a,n=(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.id)||null;if(null!==n){var i=Object.assign({},t);Object.freeze(i),r["default"].set(e.edges,n,i)}},DELETE_EDGE:function(e,t){var a,n=(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.id)||null;null!==n&&r["default"].set(e.edges,n,null)},DELETE_EDGES:function(e){e.edges={}}},vn=new dn["a"].Store({state:pn,getters:mn,actions:gn,mutations:hn}),yn=a("3a6f"),On=a.n(yn);r["default"].use(n["b"]),r["default"].use(cn["a"]),r["default"].use(un["a"]),r["default"].use(On.a),r["default"].config.productionTip=!1,new r["default"]({provide:{store:vn},render:function(e){return e(ln)}}).$mount("#app")},"59b5":function(e,t,a){"use strict";a("2099")},"5ee4":function(e,t,a){"use strict";a("71e9")},6249:function(e,t,a){},6393:function(e,t,a){},"6a78":function(e,t,a){"use strict";a("2f8f")},"71e9":function(e,t,a){},"774f":function(e,t,a){"use strict";a("041f")},"7f19":function(e,t,a){},8590:function(e,t,a){},"85ec":function(e,t,a){},"89e4":function(e,t,a){"use strict";a("4713")},"8f9b":function(e,t,a){},"97fe":function(e,t,a){"use strict";a("df3d")},bd50:function(e,t,a){},c9b4:function(e,t,a){"use strict";a("fce6")},db41:function(e,t,a){"use strict";a("6393")},df3d:function(e,t,a){},e41d:function(e,t,a){"use strict";a("8590")},e839:function(e,t,a){},fc76:function(e,t,a){"use strict";a("8f9b")},fce6:function(e,t,a){},feda:function(e,t,a){"use strict";a("4e6e")}});